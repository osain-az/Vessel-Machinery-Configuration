<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ship Machinery Configuration </title>
    <script src="machinery.js"></script>
    <!-- Load c3.css -->
<link href="./c3-0.7.15/c3.css" rel="stylesheet">

<!-- Load d3.js and c3.js -->
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="./c3-0.7.15/c3.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <style>
    .topnav {
    overflow: hidden;
    background-color: #333;

    }
    .topnav a:hover {
    background-color: #ddd;
    color: black;
    }
    .topnav a {
    float: left;
    color: #f2f2f2;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    font-size: 17px;
    }

    .topnav a.active {
    background-color: #4CAF50;
    color: white;
    }

 table,td,th {
  border: 1px solid #ddd;
  /* padding: 1px; */

}

span{
    margin-left: 20px;
    border: solid 1px rgb(221, 228, 221);
    /* margin-right: 10px; */
    padding: 3px;
}

thead{
  background-color: blueviolet;
  text-align: center;
  text-transform: uppercase;
  text-decoration-color: #f2f2f2;


}


tr:nth-child(even){background-color: #f2f2f2;}
tr:hover {background-color: #ddd;}
/*  */
#Table,#resisTable{
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  /* border-collapse: collapse; */
  border-spacing: 1px;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}

      h2,h1,p{
          text-align: center;
      }
      .engine{
          display: block;
          margin-left: auto;
          margin-right: auto;
          border: solid plum 2px;
      }
      .engineInput{

      }

    .range{
    width: 60%;
     margin-bottom: 20px;
    margin-top: 20px;
    }

    .grides{
    width: 60%;
     background-color:rgba(44, 81, 117, 0.7);
    display: grid;
    grid-template-rows: 1fr;
    grid-template-columns: 33% 33% 33%;
    grid-auto-flow: column;
    /* margin: 30px; */
    margin: 15px;

    }
    .hull,.appendage,.SternBulbous{
      width: 100%;
   
     /* background-color:rgba(44, 81, 117, 0.7); */
    display: grid;
    grid-template-rows: 1fr;
    grid-template-columns: 50% 50%;
    grid-auto-flow: column;
    /* margin: 30px; */
    margin: 15px;
    }

    .shipDimension{
        width: 60%;
        
    }



    .hullDimension,.resistance ,.appendage {
   
        width: 100%;
        /* background-color:rgba(44, 81, 117, 0.7); */
        grid-template-rows: 1fr;
         grid-template-columns:  auto;
        grid-auto-flow: column;
        margin: 15px;
        margin-left: 0;

    }
    .hull > h2{
        text-align: center;
        grid-row: 1;
        grid-column: 1;

    }

    .resistance {
      border: solid 2px grey;
    grid-row: 2;
    grid-column: 2;
    }
    .hullDimension {
      border: solid 2px grey;
    grid-row: 2;
    grid-column: 1;
    }
    #resisTable{
      margin-top: 30px;
    }

    .appendage{
      width: 100%;
     /* background-color:rgba(44, 81, 117, 0.7); */
    grid-template-rows: 1fr;
    /* grid-template-columns: 55% 45%; */
    grid-auto-flow: column;
    /* margin: 30px; */
    margin: 15px;
    }
    .inputArea{
        width: 50%;
    }

     .area {
        /* border:  solid plum 2px; */
        grid-row: 1;
      grid-column: 1;
      margin-top: 10px;
      margin-bottom: 10px;
    }
    .area1 {
    /* display: grid; */
    grid-row: 2;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
      /* padding-left: 10px;; */
    }
    .area2 {
    /* display: grid; */
    grid-row: 3;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area3 {
    /* display: grid; */
    grid-row: 4;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area4 {
    /* display: grid; */
    grid-row: 5;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area5{
    /* display: grid; */
    grid-row: 6;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area6{
    /* display: grid; */
    grid-row: 7;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area7{
    /* display: grid; */
    grid-row: 8;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area8{
    /* display: grid; */
    grid-row: 9;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area9{
    /* display: grid; */
    grid-row: 10;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area10{
    /* display: grid; */
    grid-row: 11;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area11{
    /* display: grid; */
    grid-row: 11;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }


    .mainDashboard{
        display: flex;
        flex-wrap: nowrap;
        background-color: #01040edb;
    }
    .mainDashboard > .dashboardControl{
        width: 40%;
       margin-left: 15px;
    }
    .dashboardControl{
     /* background-color:rgba(0, 2, 4, 0.7); */
     background-color:rgba(44, 81, 117, 0.7);
    display: grid;
    grid-template-rows: 1fr;
    /* grid-template-columns: 33% 33% auto; */
    grid-auto-flow: column;
    margin: 15px;
    margin-left: 0;

    }


.testin{
        margin: 30px;
        color: green;
        font-size: 1.3em;
    }
    .chart{
        border: solid #333 2px;
        text-decoration-color: aqua;
        background-color:#91b3aea3;
    }
    .chartDisp{
        margin: 15px;
        color: aqua;
        font-size: 1.3em;

    }
    .engineInput{
        color: aqua;
    }

    .hide {
    display: none;
    }

    .power{
    grid-row: 1;
    grid-column: 1;
    }
    .RPM{
    grid-row: 1;
    grid-column: 3;
    }
    .torque{
    grid-row: 1;
    grid-column: 2;
    }

    .loadwatt{
    grid-row: 2;
    grid-column: 2;
    }
    /* .SFOC{
     grid-row: 2;
      grid-column: 3;
    } */
      .column {
        flex: 50%;
        padding: 40px;
       }
       .row{
    display: flex;

     }
     #loadWattChart{

     }
     .addedMachinery{
         background-color: rgb(205, 210, 206);
         width: 90%;
         margin-left: auto;
         margin-right: auto;
         height: 500px;
     }
    </style>
    <div class="topnav">
        <a class="active" href="#home">Home</a>
        <a href="https://github.com/osain-az/Vessel-Machinery-Configuration">GitHub Rep</a>
        <a  href="information/index.html">information</a>
         <!-- <a href="Flowchat/"> Flowchat and Status </a> -->
         <!-- https://osain-az.github.io/Vessel-Machinery-Configuration/ -->
        <!-- <a href="#about"></a> -->
      </div>

    <!-- <p>This example demonstrates how to dynamically update a slider value with oninput.</p>

    this:<input type="range" step="5" oninput="myFunction(this.value)">
    <p id="demo"></p> -->

    <div class="main">
        <h1>Ship Machinery Configuration</h1>
        <div>
            <h2>Hull dimensions  and resistance display </h2>
        <div class="hull" id="hull">


            <div class="hullDimension" id="hullDimension">
                <p>Speed : <input type="range" name="" class="shipDimension" id="shipSpeed" min="5" value="10.69" max="30" step="0.1" oninput="shipDimension(event)" ><span class="displayShipSpeed"id="displayShipSpeed"> </span> </p>
               <p>Waterline length Lwl: <input type="range" name="Lwl" class="shipDimension" id="Lwl" min="10" value="205" max="600" oninput="shipDimension(event)"><span class="displayLwl"id="displayLwl"> </span>
               <!-- <p>length btw perpendicular: Lpp: <input type="range" name="" class="shipDimension" id="" min="" value="" max=""><span class="inputValue"id="displayRPM"> </span></p> -->
               <!-- <p> Overall length: LoA: <input type="range" name="" class="shipDimension" id="" min="10" value="205" max=""> <span class="inputValue"id="displayRPM"> </span></p> -->
                <p> Breath: Bwl: <input type="range" name="" class="shipDimension" id="Bwl" min="5" value="32" max="50"oninput="shipDimension(event)" > <span class="displayBwl" id="displayBwl"> </span></p>
                <p>Draught T: <input type="range" name="" class="shipDimension" id="T" min="5" value="10" max="30"  oninput="shipDimension(event)"> <span class="displayT"id="displayT"> </span></p>
               <p> afterMost Draught TA <input type="range" name="" class="shipDimension" id="TA" min="5" value="10" max="20"  oninput="shipDimension(event)"> <span class="displayTA"id="displayTA"> </span> </p>
               <p>foremost Draught  Tf: <input type="range" name="" class="shipDimension" id="Tf" min="5" value="10" max="20"  oninput="shipDimension(event)"><span class="displayTf"id="displayTf" > </span> </p> <br>


               <div>
               <p>ABT <input type="range" name="" class="shipDimension" id="ABT" min=10 value="13.4848" step="0.1" max="30"  oninput="shipDimension(event)"><span class="displayABT"id="displayABT" > </span> </p>
               <p>hB <input type="range" name="" class="shipDimension" id="hB" min="0" value="4" step="0.1" max="20"  oninput="shipDimension(event)"><span class="displayhB"id="displayhB"> </span> </p>

               <p>Transom AT <input type="range" name="" class="shipDimension" id="AT" min="3" value="16" step="0.1" max="30"  oninput="shipDimension(event)"><span class="displayAT"id="displayAT"> </span> </p>

               <div class="coefficient">
                <p>CB: <input type="range" name="" class="shipDimension" id="Cb" min="0" value="0.572" max="1" step="0.01"  oninput="shipDimension(event)"><span class="displayCb"id="displayCb" > </span> </p>
                <!-- <p>CP: <input type="range" name="" class="shipDimension" id="CP" min="0" value="" max="20"  oninput="shipDimension(event)"><span class="displayTf"id="displayTf" > </span> </p> -->
                <p>CM: <input type="range" name="" class="shipDimension" id="Cm" min="0" value="0.98" step="0.01" max="1"  oninput="shipDimension(event)"><span class="displayCm"id="displayCm" > </span> </p>
                <p>LCB (%): <input type="range" name="" class="shipDimension" id="LCB" min="0" value="1.53" step="0.1" max="6"  oninput="shipDimension(event)"><span class="displayLCB"id="displayLCB" > </span> </p>
                </div>

               <form action="" onchange="bulbousCheck(event)" class="">

               <h3>Appendage</h3>
                 <div class="appendage">

                 <div class="area">
                   <input type="checkbox" id="rudderBehindSkegCheck" name="Bilge Keel" value="">
                        <label for="Rudder behind skeg">  Rudder behind skeg </label>
                    <input type="range" name="" class="inputArea" id="rudderBehindSkeg" min="1.5" value="1.5" step="0.1" max="2"><span class="displayRudderBehindSkeg"id="displayRudderBehindSkeg"> </span> <br>
                  Area : <input type="range" name="" class="inputArea" id="ArearudderBehindSkeg" min="0" value="0" step="0.1" max="60"><span class="RudderBehindSkeg"id="RudderBehindSkegArea"> </span>
                </div>


                <div class="area1">
                    <input type="checkbox" id="rudderBehindSternCheck" name="Bilge Keel" value="">
                        <label for="Rudder behind Stern">  Rudder behind Stern </label>
                    <input type="range" name="" class="inputArea" id="rudderBehindStern" min="1.3" value="1.3" step="0.1" max="1.5"><span class="displayRudderBehindStern"id="displayRudderBehindStern"> </span> <br>
                  Area <input type="range" name="" class="inputArea" id="rudderBehindSternArea" min="0" value="0" step="0.1" max="60"><span class="displayRudderBehindStern"id="AreaRudderBehindStern"> </span>

                </div>

                 <div class="area2">
                    <input type="checkbox" id="SkegCheck" name="Skeg" value="">
                        <label for="Skeg">   Skeg  </label>
                  <input type="range" name="" class="inputArea" id="Skeg" min="1.5" value="1.5" step="0.1" max="2"><span class="displaySkeg"id="displaySkeg"> </span> <br>
                  Area <input type="range" name="" class="inputArea" id="SkegArea" min="0" value="0" step="0.1" max="60"><span class="displaySkeg"id="displaySkegArea"> </span>

                </div>

                <div class="area3">
                    <input type="checkbox" id="ShaftsCheck" name="Shafts" value="">
                       <label for="Shafts">   Shafts  </label>
                      <input type="range" name="" class="shipDimension" id="Shafts" min="2" value="2" step="0.1" max="4"><span class="displayShafts"id="displayShafts"> </span> </p>
                    Area <input type="range" name="" class="inputArea" id="ShaftsArea" min="0" value="0" step="0.1" max="60"><span class="displayShafts"id="displayShaftsArea"> </span>
                 </div>
            </form>


                <form action="" onchange="bulbousCheck(event)" class="area11">
                    <input type="checkbox" id="BilgeKeelAreaCheck" name="Bilge Keel" value="">
                    <label for="Bilge Keel"> Bilge Keel  Area: </label>
                    <input type="range" name="" class="inputArea" id="BilgeKeelArea" min="0" value="0" step="0.1" max="50"><span class="displayBilgeKeel"id="displayBilgeKeel"> </span> <br><br>

                    <input type="checkbox" id="DomeAreaCheck" name="bulbous bow" value="">
                    <label for="Dome Area"> Dome  Area: </label>
                     <input type="range" name="" class="inputArea" id="DomeArea" min="0" value="0" step="0.1" max="50"><span class="displayDome"id="displayDome"> </span> <br>  <br>

                     <input type="checkbox" id="ShaftBracketAreaCheck" name="bulbous bow" value="">
                    <label for="Shafts Area"> Shafts Bracket  Area: </label>
                   <input type="range" name="" class="inputArea" id="ShaftBracketArea" min="0" value="0" step="0.1" max="50"><span class="displayShaftBracket"id="displayShaftBracket"> </span> <br><br>

                   <input type="checkbox" id="StrutBossingsAreaCheck" name="bulbous bow" value="">
                    <label for="Strut Bossings Area"> Strut Bossings  Area: </label>
                 <input type="range" name="" class="inputArea" id="StrutBossingsArea" min="0" value="0" step="0.1" max="50"><span class="displayStrutBossings"id="displayStrutBossings"> </span> <br> <br>

                 <!-- <input type="checkbox" id="ShaftsAreaCheck" name="bulbous bow" value="">
                    <label for="Shafts Area"> Shafts  Area: </label>
                <input type="range" name="" class="inputArea" id="ShaftsArea" min="0" value="0" step="0.1" max="50"><span class="displayShafts"id="displayShafts"> </span> <br> -->

                <input type="checkbox" id="StabilizerFinsCheck" name="bulbous bow" value="">
                    <label for="Stabilizer Fins Area"> Stabilizer Fins  Area: </label>
                 <input type="range" name="" class="inputArea" id="StabilizerFins" min="0" value="0" step="0.1" max="50"><span class="displayStabilizerFins"id="displayStabilizerFins"> </span> <br><br>

                <input type="checkbox" id="hullbossingCheck" name="Hull Bossings" value="">
                <label for="Hull Bossings"> Hull Bossings </label>
                <input type="range" name="" class="inputArea" id="hullBossings" min="0" value="0" step="0.1" max="50"><span class="displayHullBossings"id="displayHullBossings"> </span> <br><br>

                <input type="checkbox" id="thrustercheck" name="thruster" value="thruster">
                <label for="Thruster"> Thruster </label>
                diameter : <input type="range" name="" class="inputArea" id="thrusterDiameter" min="0" value="0" step="0.1" max="15"><span class="displaythrusterDiameter"id="displaythrusterDiameter"> </span> <br>
                numbers of thruster : <input type="range" name="" class="inputArea" id="thrusterNO" min="1" value="2" step="" max="10"><span class="displayHullBossings"id="displaythrusterNO"> </span> <br>


                  </form>

                </div>


                <div class="SternBulbous">

                  <div class="stern "  >
                    <strong>choose Stern Shape</strong>
                  <select class="" onchange="hullDimention(event)" id="stern">
                    <option value="U&Hogner" selected>U with Hogner</option>

                   <!-- <option value="" ><strong>Choose engine</strong> </option> -->
                   <option value="V"> V</option>
                   <option value="Normal"> Normal</option>
                   <option value="PramWithGondola">Pram With Gondola</option>

                   </select>

                </div>

                 <div>
                 <form action=""onchange="bulbousCheck(event)">
                    <input type="checkbox" id="bulbous" name="bulbous bow" value="bulbous">
                    <label for="bulbous bow"> Bulbous bow</label><br>

                  </form>

                </div>
              </div>





            </div>



        </div>
        <div class="resistance">
          <div id="resistanceGraph">

          </div>
          <div  id="resistanceTable" class="">
            <table id="resisTable" class="Table">
              <thead>

                <th colspan="12">Different Resistance </th>

              </thead>
              <thead>

                <th colspan="">Resistance</th>
                <th colspan=""> kN</th>
              </thead>
              <tr>
                <td>Frictional </td>
                <td><span id="Fr">0</span></td>
              </tr>
              <tr>
                <td>Wave making</td>
                <td><span id="Rw">0</span></td>
              </tr>
              <tr>
                <td>Appendages</td>
                <td><span id="Rapp">0</span></td>
              </tr>
              <tr>
                <td>thruster resistance</td>
                <td><span id="Rtb">0</span></td>
              </tr>
              <!-- <tr>
                <td>pressure bulbous bow</td>
                <td><span id="Rb">0</span></td>
              </tr> -->
              <tr>
                <td>pressure at Transom</td>
                <td><span id="Rtr">0</span></td>
              </tr>
              <tr>
                <td>Mid-ship Correlation</td>
                <td><span id="RA">0</span></td>
              </tr>

              <tr>
                <td>Total resistance</td>
                <td><span id="RT">0</span></td>
              </tr>


            </table>

    </div>



      </div>
    </div>



        <div class="engine column" id="engine" >
            <strong><p>choose engine model</p></strong>
          <select class="engine" onchange="displayEngineType(event)">
           <option value="" selected><strong>Choose engine</strong> </option>
           <!-- <option value="kongsberg">Kongsberg</option> -->
           <option value="wartsila 32">Wartsila 32</option>
           <option value="wartsila 46F">Wartsila 46F</option>
           <!-- <option value=""></option>
           <option value=""></option> -->
           </select>

        </div>

                <div  id="engineTable" class=" hide">
                    <table id="Table" class="Table">
                      <thead>

                        <th colspan="12"></th>

                      </thead>
                      <tr>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>

                        <td></td>
                        <td></td>
                      </tr>

                    </table>

            </div>




        <div id="mainDashboard" class="mainDashboard hide">

         <div id="engineDashboard" class="grides">

                <div class="power chartDisp" >
                    <p>Engine rated power </p>
                    <div id="powerChart" class="chart"></div>

                </div>

                <div class="torque chartDisp" id="torque">
                    <p>Engine Torque kNm</p>
                    <div id="torqueChart" class="chart"></div>

                </div>
                <div class="RPM chartDisp" id="RPM">
                    <p>Engine Speed RPM</p>
                    <div id="RPMchart" class="chart"></div>
                </div>
                <div class="load chartDisp" >
                <p>Engine load in %</p>
                    <div id="loadChart" class="chart">

                </div>
            </div>

                <div class="loadwatt chartDisp" id="loadwatt">
                    <p>Engine load kW</p>
                    <div id="loadWattChart" class="chart"></div>
                </div>

                <div class="SFOC_chart chartDisp" id="SFOC_chart">
                    <p> current SFOC </p>
                    <div id="sfocChart" class="chart"></div>
              </div>



            </div>



        <div class="dashboardControl">


            <!-- parameters control and configuration  -->
            <div class="engineInput">
              <!-- <h2>Engine configuration and darshboard </h2> -->

              <form  id="simple_form" class="form">

              <p class="P_range testing" >Speed RPM : <input type="range" step="10" id="RPM" class="range" onchange= "getValues(event)"  oninput="myFunction(this.value)"> or
               <input type="text" placeholder="input engine speed.." onchange="getValues(event)"  id="RPMInput"><span class="inputValue"id="displayRPM"> </span><br> </p>

               <p class="P_range">Load %: <input type="range" max="98" min="10"id="load" class="range" step="2" onchange="getValues(event)"oninput="loadSfoc(this.value)" > or
             <input type="text" placeholder="input engine load %.." onchange="getValues(event)"  id="loadInput"><span  class="inputValue" id="loadDisplay"> </span><br> </p>

          <p class="P_range" >Desired Power kW: <input type="range" step="2" id="power" class="range" onchange="getValues(event)" oninput="powerSfoc(this.value)" > or
               <input type="text" placeholder="input Power.."onchange="getValues(event)"  id="powerInput">
              <span  class="powerDisplay" id="powerDisplay"> </span> </p>

                  </form>
    </div>

          </div>

        </div>





                       <!-- grapph ploting here -->
                       <div class="SFOC" id="SFOC">
                        <div id="plot" class="plot"></div>
                  </div>


    </div>

    <div class="addedMachinery">
        <h2>The chose machinery will be dispplay here  </h2>

    </div>

    <script>

    let data, data2, RPM, Power,enginetype,speedRPM, engineStrokes, meanPressure,cylinderBore,pistonStroke,sfoc_cal,
    enginePower,engine_loadPercent, LHV,fuelType,ratedPower,ratedSfoc, rpm_min, rpm_max, torque,load,supplier,ratedSpeed,
    minLoad, minPower,T, TA, Tf, Bwl, Lwl, shipSpeed, shipSpeedKnots, rudderBehindSkeg, rudderBehindStern, bilgeKeel, dome, stabilizerFins, shafts,
    hullBossings, strutBossings, skeg, shaftBracket, TwinScrewBalaRudder, Fn, Rn, Cb, Cm, Cp, Cwp, g, shipVolume, Cf, density, hB, ABT, AT, stern,inputShipVolume,
    Am, Awl,Rw,bulbous, sternId, lcb, Lpp, LOA,iE,Rw_A, Rw_B, Rb, Rtr, RA, Rf, Rbt,Rapp, Sa,domeCheck,StaFins,shaftsCheck,sBossings,sBracket,bKeel,thruster,K2,dt,Sapp,
    Rform


 // all constant
 viscosity = 0.0000012 // m/s^2
 g = 9.81  // m/s^2
 density = 1025 // kg/m^3






    function resistnaceDisplay (){


var resistance = {
  type: 'scatter',
  x: [],
  y: [],
}

var resistData = [ resistance ]
var layout = {

  xaxis:
	{
        range: [0, 35],
        showgrid: false,
        title: 'Ship speed in knots'
    },
    yaxis:{
        showgrid: false,
        range: [0, 1500],
        title: 'kN'

    },
    title: 'Resistance curve  ',

//   plot_bgcolor: 'yellow',
  width:600,
  height:600,
//   paper_bgcolor: 'purple'

}
Plotly.newPlot('resistanceGraph',resistData,layout);
var cnt = 0;

// var interval = setInterval(function() {
//   console.log(sfoc_cal)
//   Plotly.extendTraces('plot', {
//     x: [[engine_loadPercent]],
//     y: [[sfoc_cal]]
//   }, [0], 10000)
//   if(engine_loadPercent > 100) clearInterval(interval);
// }, 10);

}
resistnaceDisplay ()



function sfocDisplay (){


// var liveSfoc = {
//   type: 'scatter',
//   x: [engine_loadPercent],
//   y: [sfoc_cal],
// }

// var datas = [ liveSfoc ]
// var layout = {

//   xaxis:
// 	{
//         range: [0, 100],
//         showgrid: false,
//         title: 'engine load in %'
//     },
//     yaxis:{
//         showgrid: false,
//         range: [0, 300],
//         title: 'SFOC'

//     },

// //   plot_bgcolor: 'yellow',
//   width:600,
//   height:400,
// //   paper_bgcolor: 'purple'

// }
// Plotly.newPlot('plot',datas,layout);
var cnt = 0;

var interval = setInterval(function() {
  console.log(sfoc_cal)
  Plotly.extendTraces('plot', {
    x: [[engine_loadPercent]],
    y: [[sfoc_cal]]
  }, [0], 10000)
  if(engine_loadPercent > 100) clearInterval(interval);
}, 10);

}

var liveSfoc = {
  type: 'scatter',
  x: [],
  y: [],
}

var datas = [ liveSfoc ]
var layout = {

  xaxis:
	{
        range: [0, 100],
        showgrid: false,
        title: 'engine load in %'
    },
    yaxis:{
        showgrid: false,
        range: [100, 220],
        rangemode:"tozero",
        title: 'SFOC'

    },
   title: 'Live SFOC Vs engine load % ',
//   plot_bgcolor: 'yellow',
  width:600,
  height:600,
//   paper_bgcolor: 'purple'

}
Plotly.newPlot('plot',datas,layout);


//Graph resistance



function powerDisplay (){
var chart = c3.generate({

    bindto: '#powerChart',

    data: {
        columns: [
            ['Engine power', enginePower*0.01]
        ],
        type: 'gauge',
        onclick: function (d, i) { console.log("onclick", d, i); },
        onmouseover: function (d, i) { console.log("onmouseover", d, i); },
        onmouseout: function (d, i) { console.log("onmouseout", d, i); }
    },

    gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
        },
    min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
    max: enginePower, // 100 is default
    units: '  kW',
    width: 39 // for adjusting arc thickness

    },

    color: {
        pattern: ['#FF0000', '#F97600', '#F6C600', '#60B044'], // the three color levels for the percentage values.
        threshold: {
//            unit: 'value', // percentage is default
//            max: 200, // 100 is default
            values: [enginePower*0.25, enginePower*0.33, enginePower*0.6, enginePower]
        },

    },
    size: {
        height: 150
    }
});

setTimeout(function () {
    chart.load({
        columns: [['Engine power', enginePower*0.1]]
    });
}, 1000);

setTimeout(function () {
    chart.load({
        columns: [['Engine power', enginePower*0.5]]
    });
}, 2000);

setTimeout(function () {
    chart.load({
        columns: [['Engine power', enginePower]]
    });
}, 3000);
}

function torqueDisplay (){
    let torqueMax,i
    i = 10
    console.log("torque",torque)
    console.log("torque max")
    torqueMax = i+torque



var chart1 = c3.generate({

  bindto: '#torqueChart',

  data: {
      columns: [
          ['Torque', 10]
      ],

      type: 'gauge',
      onclick: function (d, i) { console.log("onclick", d, i); },
      onmouseover: function (d, i) { console.log("onmouseover", d, i); },
      onmouseout: function (d, i) { console.log("onmouseout", d, i); }
  },
  gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
      },
  min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
  max: torqueMax, // 100 is default
 units: ' kNm',
  width: 39 // for adjusting arc thickness

  },

  color: {
      pattern: ['#FF0000','#F43500', '#b2d2c2'], // the three color levels for the percentage values.
      threshold: {
//            unit: 'value', // percentage is default
        //   max: (200), // 100 is default
          values: [torque/3,torque/2, torque ]
      },

  },
  size: {
      height: 150
  }
});

setTimeout(function () {
    chart1.load({
        columns: [['Torque', torque/3]]
    });
}, 5000);

setTimeout(function () {
    chart1.load({
        columns: [['Torque', torque/2]]
    });
}, 7000);
setTimeout(function () {
    chart1.load({
        columns: [['Torque', torque]]
    });
}, 9000);


}



function rpmDisplay(){
    if(!speedRPM){
        speedRPM = ratedPower
    }

    var chart2 = c3.generate({

    bindto: '#RPMchart',

    data: {
        columns: [
            ['Speed', ratedSpeed]
        ],
        type: 'gauge',
        onclick: function (d, i) { console.log("onclick", d, i); },
        onmouseover: function (d, i) { console.log("onmouseover", d, i); },
        onmouseout: function (d, i) { console.log("onmouseout", d, i); }
    },
    gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
      },
  min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
  max: ratedSpeed+10, // 100 is default
 units: '  rpm',
  width: 39 // for adjusting arc thickness

  },


    color: {
        pattern: ['#FF0000', '#F97600', '#F6C600', '#60B044'], // the three color levels for the percentage values.
        threshold: {
//            unit: 'value', // percentage is default
//            max: 200, // 100 is default
            values: [speedRPM*0.25, speedRPM*0.5, speedRPM*0.7, speedRPM]
        }
    },
    size: {
        height: 150
    }
});

setTimeout(function () {
    chart2.load({
        columns: [['Speed', speedRPM*0.01]]
    });
}, 1000);

setTimeout(function () {
    chart2.load({
        columns: [['Speed', speedRPM*0.3]]
    });
}, 2000);

setTimeout(function () {
    chart2.load({
        columns: [['Speed', speedRPM*0.7]]
    });
}, 3000);



setTimeout(function () {
    chart2.load({
        columns: [['Speed', speedRPM]]
    });
}, 5000);

}


function loadDisplay(){
    if(!engine_loadPercent){
        engine_loadPercent = 0
    }

var chart4 = c3.generate({

  bindto: '#loadChart',

  data: {
      columns: [
          ['Load', engine_loadPercent]
      ],

      type: 'gauge',
      onclick: function (d, i) { console.log("onclick", d, i); },
      onmouseover: function (d, i) { console.log("onmouseover", d, i); },
      onmouseout: function (d, i) { console.log("onmouseout", d, i); }
  },
  gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
      },
  min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
  max: 100, // 100 is default
 units: ' %',
  width: 39 // for adjusting arc thickness

  },

  color: {
      pattern: ['#FF0000', '#FF0000', '#FF0000', '#FF0000', '#FF0000'], // the three color levels for the percentage values.
      threshold: {
//            unit: 'value', // percentage is default
          // max: 200, // 100 is default
          values: [20, 40, 60, 80, 100]
      }
  },
  size: {
      height: 150
  }
});

if(load){
setTimeout(function () {
  chart4.load({
      columns: [['Load',engine_loadPercent]]
  });
}, 1000);

}

// setTimeout(function () {

// }, 6000);
// let k = sfoc_cal


    var interval = setInterval(function() {

        chart4.load({
          columns: [['Load', engine_loadPercent]]
      });

      }, 1000);
//  if( > 10) clearInterval(interval);

 ;


}




function loadWattDisplay (){
    if(!load){
        load = 0
    }

var chart3 = c3.generate({


  bindto: '#loadWattChart',

  data: {
      columns: [
          ['engine load', load]
      ],

      type: 'gauge',
      onclick: function (d, i) { console.log("onclick", d, i); },
      onmouseover: function (d, i) { console.log("onmouseover", d, i); },
      onmouseout: function (d, i) { console.log("onmouseout", d, i); }
  },
  gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
      },
  min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
  max: ratedPower, // 100 is default
 units: '  kW',
  width: 39 // for adjusting arc thickness

  },

  color: {
      pattern: ['#FF0000'], // the three color levels for the percentage values.
      threshold: {
//            unit: 'value', // percentage is default
          // max: 200, // 100 is default g
          values: [200]
      }
  },
  size: {
      height: 150
  }
});

setTimeout(function () {
  chart3.load({
      columns: [['engine load', load]]
  });
}, 1000);

var interval = setInterval(function() {

      chart3.load({
        columns: [['engine load',load ]]
    });

      // if( > 10) clearInterval(interval);
    }, 100);


}

function currentSfocDisplay (){
    let sofocdisplay
    if(!sfoc_cal){
        sfoc_cal = ratedSfoc
    }


    var chart4 = c3.generate({

      bindto: '#sfocChart',

      data: {
          columns: [
              ['sfoc', sfoc_cal]
          ],

          type: 'gauge',
          onclick: function (d, i) { console.log("onclick", d, i); },
          onmouseover: function (d, i) { console.log("onmouseover", d, i); },
          onmouseout: function (d, i) { console.log("onmouseout", d, i); }
      },
      gauge: {
          label: {
              format: function(value, ratio) {
                  return value;
              },
              show: true // to turn off the min/max labels.
          },
      min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
      max: 220, // 100 is default
     units: '  g/kWh',
      width: 39 // for adjusting arc thickness

      },

      color: {
          pattern: ['#FF0000'], // the three color levels for the percentage values.
          threshold: {
    //            unit: 'value', // percentage is default
              // max: 200, // 100 is default g
              values: [sfoc_cal]
          }
      },
      size: {
          height: 150
      }
    });

    // setTimeout(function () {
    //   chart1.load({
    //       columns: [['sfoc', sfoc_cal]]
    //   });
    // }, 1000);

    var interval = setInterval(function() {

        chart4.load({
          columns: [['sfoc', sfoc_cal]]
      });

        // if( > 10) clearInterval(interval);
      }, 100);


    }
    let x = 0

    function bulbousCheck(event){

         let BKA,SkegCheck, RBSCheck,RBSkegCheck,hullBossings,thrustersCheck,thrustersNO,thrusterD, bulbousCkeck,
         StaFinsVal, bKeelVal,domeCheckVal, sBracketVal,sBossingsVal,shaftsCheckVal,RBS,RBStern,
       Skeg,RBSArea,RBSternArea,SkegArea,shafts,hullBossingsVal,
        s1, s2, s3, s4, s5, s6, s7, s8, s9, s10,k2_1,k2_2,k2_3,k2_4,k2_5,k2_6,k2_7,k2_8,k2_9, k2_10,i
        i = 0

         bulbousCkeck = document.getElementById("bulbous").checked

         RBSkegCheck = document.getElementById("rudderBehindSkegCheck").checked
         RBSCheck = document.getElementById("rudderBehindSternCheck").checked
         SkegCheck = document.getElementById("SkegCheck").checked
         domeCheck = document.getElementById("DomeAreaCheck").checked
         StaFins = document.getElementById("StabilizerFinsCheck").checked
          shaftsCheck = document.getElementById("ShaftsCheck").checked
         sBossings = document.getElementById("StrutBossingsAreaCheck").checked
         sBracket = document.getElementById("ShaftBracketAreaCheck").checked
         bKeel = document.getElementById("BilgeKeelAreaCheck").checked
         hullBossings = document.getElementById("hullbossingCheck").checked
         thrustersCheck = document.getElementById("thrustercheck").checked

         RBSArea= document.getElementById('ArearudderBehindSkeg').value
         RBSternArea= document.getElementById('rudderBehindSternArea').value
         SkegArea= document.getElementById('SkegArea').value
         domeCheckVal = document.getElementById('DomeArea').value
         StaFinsVal = document.getElementById('StabilizerFins').value
          shaftsCheckVal = document.getElementById('ShaftsArea').value
         bKeelVal = document.getElementById('BilgeKeelArea').value
         sBracketVal = document.getElementById('ShaftBracketArea').value
         hullBossingsVal = document.getElementById('hullBossings').value
         sBossingsVal = document.getElementById('StrutBossingsArea').value

      //  StaFinsVal = document.getElementById('StabilizerFins').value
       document.getElementById('displayStabilizerFins').innerHTML= StaFinsVal + " m^2"

      //  bKeelVal = document.getElementById('BilgeKeelArea').value
       document.getElementById('displayBilgeKeel').innerHTML= bKeelVal + " m^2"

      //  domeCheckVal = document.getElementById('DomeArea').value
       document.getElementById('displayDome').innerHTML= domeCheckVal + " m^2"

      //  sBracketVal = document.getElementById('ShaftBracketArea').value
       document.getElementById('displayShaftBracket').innerHTML= sBracketVal + " m^2"

      //  sBossingsVal = document.getElementById('StrutBossingsArea').value
       document.getElementById('displayStrutBossings').innerHTML= sBossingsVal + " m^2"

         document.getElementById('displayHullBossings').innerHTML= hullBossingsVal + ""

         thrusterD = document.getElementById('thrusterDiameter').value
        thrustersNO = document.getElementById('thrusterNO').value
   document.getElementById('displaythrusterDiameter').innerHTML= thrusterD + " m"
  document.getElementById('displaythrusterNO').innerHTML= thrustersNO


     RBS= document.getElementById('rudderBehindSkeg').value
  document.getElementById('displayRudderBehindSkeg').innerHTML=RBS +" "
//  RBSArea= document.getElementById('ArearudderBehindSkeg').value
  document.getElementById('RudderBehindSkegArea').innerHTML= RBSArea + " m^2"

  RBStern= document.getElementById('rudderBehindStern').value
  document.getElementById('displayRudderBehindStern').innerHTML= RBStern +" "
//  RBSternArea= document.getElementById('rudderBehindStern').value
 document.getElementById('AreaRudderBehindStern').innerHTML= RBSternArea

  Skeg= document.getElementById('Skeg').value
  document.getElementById('displaySkeg').innerHTML= Skeg +" "
//  SkegArea= document.getElementById('SkegArea').value
  document.getElementById('displaySkegArea').innerHTML= SkegArea

//  shaftsCheckVal = document.getElementById('ShaftsArea').value
  document.getElementById('displayShaftsArea').innerHTML= shaftsCheckVal
  shafts = document.getElementById('Shafts').value
  document.getElementById('displayShafts').innerHTML= shafts

        //  let s1, s2, s3, s4, s5, s6, s7, s8, s9, s10,Sapp
        //  s1 to to s10 represent the weted area of the individual appenadge
        //  Sappp  is the total wtted of all the appendages

        if(RBSkegCheck=== true && RBSArea > 0){
         RBS= document.getElementById('rudderBehindSkeg').value
         k2_1 = (RBSArea * RBS)/RBSArea
         s1 = RBSArea *1
         i = 1
        }else{
            k2_1  = 0
            s1 = 0
        }
        if(RBSCheck=== true && RBSternArea > 0){
            RBStern= document.getElementById('rudderBehindStern').value
            k2_2 = (RBSternArea * RBStern)/RBSternArea
            s2 = RBSternArea*1
            i = 1
        }else{
            k2_2 =0
            s2 = 0
        }

        if(SkegCheck===true && SkegArea > 0){
          Skeg= document.getElementById('Skeg').value
            k2_3 = (SkegArea * Skeg)/SkegArea
            s3 = SkegArea*1
            i = 1
        }else{
            k2_3 =0
            s3 = 0
        }
        if(domeCheck===true && domeCheckVal > 0){
            //Dome
            k2_4 = (2.7* domeCheckVal)/domeCheckVal
            s4 = domeCheckVal*1
            i = 1
        }else{
            k2_4 = 0
            s4 =0
        }
        if(StaFins === true && StaFinsVal > 0){
            k2_5 = (2.8 * StaFinsVal)/StaFinsVal
            s5 = StaFinsVal*1
            i = 1
        }else{
            k2_5 = 0
            s5 = 0
        }
        if(shaftsCheck === true && shaftsCheckVal > 0 ){
            shafts = document.getElementById('Shafts').value
            k2_6 = (shafts * shaftsCheckVal)/shaftsCheckVal
            s6 = shaftsCheckVal*1
            i = 1
        }else{
            k2_6 = 0
            s6 = 0
        }
        if(bKeel === true && bKeelVal > 0){
            k2_7 = (1.4* bKeelVal)/bKeelVal
            s7 = bKeelVal*1
            i = 1
        }else{
            k2_7 = 0
            s7 = 0
        }
        if(sBossings === true && sBossingsVal > 0){
            k2_8 = (3 * sBossingsVal)/sBossingsVal
            s8 =  sBossingsVal*1
            i = 1
        }else{
            k2_8 = 0
            s8 = 0
        }
        if(sBracket === true && sBracketVal > 0){
            k2_9 = (3* sBracketVal)/sBracketVal
            s9 =  sBracketVal*1
            i = 1
        }else{
            k2_9 = 0
            s9 = 0
        }
        if(hullbossingCheck === true && hullBossingsVal > 0){
            k2_10 = ((2* hullBossingsVal )/hullBossingsVal)*1
            s10 = hullBossingsVal*1
            i = 1
        }else{
            k2_10 = 0
            s10 = 0
        }
        Sapp = s1+s2+s3+s4+s5+s6+s7+s8+s9+s10

        if(Sapp <= 0){

          Sapp = 1
        }

       K2 =  k2_1+k2_2+k2_3+k2_4+k2_5+k2_6+k2_7+k2_8+k2_9+ k2_10
      //
      //Check if thrusters are fitted on the vessel
      if(thrustersCheck=== true){
        // dt means thruster diamter
        thruster = thrustersCheck
         dt = thrusterD * thrustersNO
    
        i = 1

      }else{
        dt = 0
      }
      if(!stern){
        stern = document.getElementById('stern').value
      }

      //Check if bulbous bow is fitted on the vessel
      if(bulbousCkeck===true){
         bulbous = bulbousCkeck
         i = 1
      }

      //  shipHull.hull()
      //  shipHull.coefficient()
  //      calResistnace.appendageResistance()
  //      calResistnace.PressureResistance()

  // calResistnace.bulbousResistance()
      // calResistnace.frictionalResistance()
      // calResistnace.correctionResistance()
      // calResistnace.formFactor()
      // calResistnace.RwHighSped()
//  calResistnace.waveResistance()

    shipDimension(event)
    if(i >0 || x<2){
      updateResistance()
      // calResistnace.totalResistance()
      // calResistnace.finalWaveResistance()
    }
    x = 2
     }


 shipDimension(event)
 bulbousCheck(event)


 function shipDimension(event){

 shipSpeedKnots = document.getElementById('shipSpeed').value
 document.getElementById('displayShipSpeed').innerHTML= shipSpeedKnots + " knots"
 shipSpeed = shipSpeedKnots* 0.5144
 Lwl = document.getElementById('Lwl').value
 Lwl = Lwl*1
 document.getElementById('displayLwl').innerHTML= Lwl + " m"

 Bwl = document.getElementById('Bwl').value
 document.getElementById('displayBwl').innerHTML= Bwl + " m"
 Bwl = Bwl*1
 T = document.getElementById('T').value
 T = T*1
 document.getElementById('displayT').innerHTML= T + " m"


 TA = document.getElementById('TA').value
 TA = TA*1
 document.getElementById('displayTA').innerHTML= TA + " m"

 Tf = document.getElementById('Tf').value
 Tf = Tf*1
 document.getElementById('displayTf').innerHTML= Tf + " m"

 ABT = document.getElementById('ABT').value
 ABT = ABT*1
 document.getElementById('displayABT').innerHTML= ABT + " m^2"

 hB = document.getElementById('hB').value
 hB= hB*1
 document.getElementById('displayhB').innerHTML= hB + " m"
//Immersed part area of the Transverse transom
 AT = document.getElementById('AT').value
 AT = AT*1
 document.getElementById('displayAT').innerHTML= AT + " m^2"

 //Angle of entrance
//  iE = document.getElementById('iE').value
//  document.getElementById('displayiE').innerHTML= iE + " Degree"

 //
 Cb = document.getElementById('Cb').value
 Cb = Cb*1
 document.getElementById('displayCb').innerHTML= Cb

 Cm = document.getElementById('Cm').value
 Cm = Cm*1
 document.getElementById('displayCm').innerHTML= Cm

 //
 lcb = document.getElementById('LCB').value
 lcb = lcb*1
 document.getElementById('displayLCB').innerHTML= lcb

//  let appendages,RBS, RBSArea,RBStern, RBSternArea,Skeg, SkegArea,
//  StaFinsVal, bKeelVal,domeCheckVal, sBracketVal,sBossingsVal,shaftsCheckVal,shafts,hullBossings,thrustersNO,thrustersD

//   RBS= document.getElementById('rudderBehindSkeg').value
//  document.getElementById('displayRudderBehindSkeg').innerHTML=RBS +" "
//  RBSArea= document.getElementById('ArearudderBehindSkeg').value
//  document.getElementById('RudderBehindSkegArea').innerHTML= RBSArea + " m^2"

//  RBStern= document.getElementById('rudderBehindStern').value
//  document.getElementById('displayRudderBehindStern').innerHTML= RBStern +" "
//  RBSternArea= document.getElementById('rudderBehindStern').value
//  document.getElementById('AreaRudderBehindStern').innerHTML= RBSternArea

//  Skeg= document.getElementById('Skeg').value
//  document.getElementById('displaySkeg').innerHTML= Skeg +" "
//  SkegArea= document.getElementById('SkegArea').value
//  document.getElementById('displaySkegArea').innerHTML= SkegArea

//  shaftsCheckVal = document.getElementById('ShaftsArea').value
//  document.getElementById('displayShaftsArea').innerHTML= shaftsCheckVal
//  shafts = document.getElementById('Shafts').value
//  document.getElementById('displayShafts').innerHTML= shafts


//  StaFinsVal = document.getElementById('StabilizerFins').value
// document.getElementById('displayStabilizerFins').innerHTML= StaFinsVal


// bKeelVal = document.getElementById('BilgeKeelArea').value
// document.getElementById('displayBilgeKeel').innerHTML= bKeelVal

// domeCheckVal = document.getElementById('DomeArea').value
//  document.getElementById('displayDome').innerHTML= domeCheckVal

//  sBracketVal = document.getElementById('ShaftBracketArea').value
// document.getElementById('displayShaftBracket').innerHTML= sBracketVal

// sBossingsVal = document.getElementById('StrutBossingsArea').value
//  document.getElementById('displayStrutBossings').innerHTML= sBossingsVal

//   //  shaftsCheckVal = document.getElementById('ShaftsArea').value
//   // document.getElementById('displayShafts').innerHTML= shaftsCheckVal

//   hullBossings = document.getElementById('hullBossings').value
//   document.getElementById('displayHullBossings').innerHTML= hullBossings

//   hullBossings = document.getElementById('hullBossings').value
//   document.getElementById('displayHullBossings').innerHTML= hullBossings

//   thrusterD = document.getElementById('thrusterDiameter').value
//   document.getElementById('displaythrusterDiameter').innerHTML= thrusterD + " m"
//  thrustersNO = document.getElementById('thrusterNO').value
//  document.getElementById('displaythrusterNO').innerHTML= thrustersNO


// different function below


//  updateResistance()
}

function hullDimention(event){
    sternId = event.target.value
    stern = sternId

}
function AllResistance(){

//   shipHull.hull()
//   shipHull.coefficient()
// calResistnace.waveResistance()

}

function displayResistance(){
  document.getElementById('Fr').innerHTML=  Rf + " "
  document.getElementById('Rw').innerHTML=  Rw+ " "
  document.getElementById('Rapp').innerHTML=  Rapp+ " "
  document.getElementById('Rtb').innerHTML=  Rbt+ " "
  document.getElementById('Rtr').innerHTML=  Rbt+ " "
  document.getElementById('RA').innerHTML=  RA+ " "
  document.getElementById('RT').innerHTML=  RT+ " "
}

function updateResistance(){
let c,k,val,i,s

     s = shipSpeedKnots*0.5144
    val = shipSpeedKnots;
    
    //  n = 20
        c = 1
        i = 0
      for ( k = 1; k < val;k ++) {
        inputData(i);
        i++
        }

        function inputData(i) {
        setTimeout(function() {

               if(val-c > 1 ){
                shipSpeed = (c+1)*0.5144

              }else if(val-c <= 1){
                shipSpeed = s
                if(RT){
                  displayResistance()
                }
                
              }
            
          calResistnace.totalResistance()

        c++
        console.log("Speed",shipSpeed)
        console.log("c",c)
        }, 100 * i);
        }
        

}



let lastRPM;
let i = 1;
function loadSfoc(val){
    // this is for the percentage Range slider
 document.getElementById('loadDisplay').innerHTML= val + " engine load %"
 load = (val/100)*enginePower
 engine_loadPercent = val
EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)

if(i <= 1){
 sfocDisplay ()
}
i++

}

function powerSfoc(val){
    //this is for the power range
 document.getElementById('powerDisplay').innerHTML= val + " engine load %"
 load = val
EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)

if(i <= 1){
 sfocDisplay ()
}
i++
}


function myFunction(val) {


// document.getElementById("demo").innerHTML = val;
// console.log(val)
// // lastRPM= document.getElementById("demo").min;
// // lastRPM= document.getElementById("demo").max;
// document.getElementById('displayRPM').innerHTML= val + " rpm"
// speedRPM = val
alert("Estimation using the RPM is still under improvemnt !, use other methods")
// EngineCal.torque(engineStrokes,speedRPM,meanPressure,cylinderBore,cylinders,pistonStroke )
// EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)

// if(i <= 1){
// //  sfocDisplay ()
// currentSfocDisplay()

// }
// i++


}

function showEngineDashbaord (){
    document.getElementById("mainDashboard").classList.remove("hide");
    document.getElementById("engineDashboard").classList.remove("hide");
  document.getElementById("engineDashboard").classList.add("grides");
  document.getElementById("power").classList.add("power");
  document.getElementById("load").classList.add("load");
  document.getElementById("torque").classList.add("torque");
  document.getElementById("RPM").classList.add("RPM");
  document.getElementById("loadwatt").classList.add("loadwatt");
  document.getElementById("SFOC").classList.add("SFOC");

}

// function updatSlider(){
//    console.log(engineDetail)
//  if(engineDetail.speed_type=== "Medium-Speed"){
//    rpm_min = 400
//     rpm_max = engineDetail.Engine_speed
//  }

//  else if(engineDetail.speed_type=== "Slow-Speed"){
//    rpm_min = 10
//     rpm_max = engineDetail.Engine_speed
//  }

//  else if(engineDetail.speed_type=== "Fast-Speed"){
//    rpm_min = 1400
//     rpm_max = engineDetail.Engine_speed
//  }


    // document.getElementById('displayRPM').innerHTML= rpm_min + " minimun rpm"
    // document.getElementById('RPM').max = rpm_max
    // document.getElementById('RPM').min = rpm_min
    // document.getElementById('RPM').value = rpm_min



// }


function displayEngineType(event) {
  document.getElementById("engineTable").classList.remove("hide");
  document.getElementById("mainDashboard").classList.remove("hide");
//   showEngineDashbaord ()

  const table = document.getElementById("Table");
  let i = 0
  let row, engineDetail;

  const EventID = event.target.value
  console.log(EventID)
if (EventID==="wartsila 32"){
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
}

 engineDetail = wartsila32
 ratedPower = engineDetail.power

       // updating sliders


//  const regex = /[+-]?\d+(\.\d+)?/g;
// match(/\d+/)*1


 engineStrokes =wartsila32.Strokes
 meanPressure = parseFloat(wartsila32.mean_Presure)
 cylinderBore = parseFloat(wartsila32.cylinderBore)
 cylinders = parseFloat(wartsila32.cylinders)
 pistonStroke = parseFloat(wartsila32.pistonStroke)
 enginePower = parseFloat(wartsila32.power)
 ratedSfoc = parseFloat(wartsila32.SFOC)
 supplier = wartsila32.supplier
 ratedSpeed = parseFloat(wartsila32.Engine_speed)

//  speedRPM  = 432

 EngineCal.torque(engineStrokes,speedRPM,meanPressure,cylinderBore,cylinders,pistonStroke )
//  EngineCal.SFOC(load,power,ratedSfoc,supplier)
 torqueDisplay ()
 powerDisplay()
 rpmDisplay()
 loadDisplay()
 loadWattDisplay ()
 currentSfocDisplay()
    // updating sliders

  if(engineDetail.speed_type=== "Medium-Speed"){
   rpm_min = 400
   rpm_max = parseFloat(engineDetail.Engine_speed)

 }

 else if(engineDetail.speed_type=== "Slow-Speed"){
   rpm_min = 10
   rpm_max = parseFloat(engineDetail.Engine_speed)
 }

 else if(engineDetail.speed_type=== "Fast-Speed"){
   rpm_min = 1400
   rpm_max = parseFloat(engineDetail.Engine_speed)
 }
//  else if (load){
//      if(){

//      }
//  }

    document.getElementById('displayRPM').innerHTML= rpm_min + " minimun rpm"
    document.getElementById('RPM').value = rpm_min
    document.getElementById('RPM').max = rpm_max
    document.getElementById('RPM').min = rpm_min

   minLoad= document.getElementById('load').min
    document.getElementById('loadDisplay').innerHTML= minLoad+ " minimun load %"
    document.getElementById('load').value = minLoad

    minPower = enginePower*0.1

    document.getElementById('power').max = (enginePower-10)
    document.getElementById('power').min = minPower
    document.getElementById('power').value = minPower
    document.getElementById('powerDisplay').innerHTML= minPower+ " minimun desired power "

}

//  else if(engineDetail.speed_type=== "slow-Speed"){
//     document.getElementById('RPM').max =
//  }
//  else if(engineDetail.speed_type=== "fast-Speed"){
//     document.getElementById('RPM').max =
//  }


else if (EventID==="wartsila 46F") {
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
}
 engineDetail = wartsila46
}

  for (let [key, value] of Object.entries(engineDetail)) {
    console.log(`${key}: ${value}`);
    document.getElementById("engineTable").classList.remove("hide");

      let table = document.getElementById("Table");
    //   table.classList.remove("hide")
       row = table.insertRow(i)
     console.log(row)
    row.insertCell(0).innerHTML =`<strong>`+`${key}:</strong> `;
    row.insertCell(1).innerHTML = `<strong>` +`${value}`+ "</strong>";
    i++;
  }
  let header= table.createTHead();
    let newRow = header.insertRow(0);
    newRow.innerHTML= "<th colspan=12>Product details and specifications </th>"

}


function getValues(event){
    let val, k,i, n, c,t
    t = 1

  const EventID = event.target.id;

 if (EventID ==='RPM' || EventID === 'RPMInput') {
      RPM  = event.target.value

    if (EventID ==='RPMInput') {
     document.getElementById(EventID).value = ""

    }


//  }
}

else if(EventID ==='load'){

 val  = event.target.value
 load = (val/100)*enginePower
 engine_loadPercent = val
EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)

 document.getElementById("loadDisplay").innerHTML= val + "% engine power"


}


else if(EventID ==='loadInput'){

    val = document.getElementById(EventID).value

    document.getElementById(EventID).value = ""

    document.getElementById("loadDisplay").innerHTML= val + "% engine power"
     c= (10/100)*val;
     n = 20
     if(val >=20 && val <= 100){
        i = 0
      for ( k = 20; k < val;k +=c) {

        inputData(i);
        i++
        }

        function inputData(i) {
        setTimeout(function() {

            console.log(i);
                if(val -n >c ){
                load = (n/100)*enginePower
                EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)
                console.log("this is the load 1",load)
             }else{
            load = (val/100)*enginePower
            EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)
            console.log("this is the load last",load)
                }
              n+=c

        }, 2000 * i);
        }
}
}


else if(EventID ==='power'){


}

else if(EventID === 'powerInput'){

    if(t <= 1){
 sfocDisplay ()
}
t++
    val = parseFloat(document.getElementById(EventID).value)

    document.getElementById(EventID).value = ""

    document.getElementById("powerDisplay").innerHTML= val + "engine load kW"

    c= (10/100)*val;
     if(val >=minPower && val <= enginePower){
        i = 0
        n= minPower;
      for ( k = minPower; k < val;k +=c) {

        inputData(i);
        i++
        }

        function inputData(i) {
        setTimeout(function() {

            console.log("K", n);
            console.log("Val",val);
            console.log(i);
                if(val -n >c ){
                    console.log("testing")
                load = n
                EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)
                console.log("this is the load 1",load)
             }else{
            load = val
            EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)
            console.log("this is the load last",load)
                }
              n+=c

        }, 2000 * i);
        }
}

}
}

 //update the sliddre


    </script>

</body>
</html>