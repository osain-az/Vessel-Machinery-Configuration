<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ship Machinery Configuration </title>
    <script src="machinery.js"></script>
    <script src="eedi.js"></script>

    <!-- Load c3.css -->
<link href="./c3-0.7.15/c3.css" rel="stylesheet">

<!-- Load d3.js and c3.js -->
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="./c3-0.7.15/c3.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>
<body>
    <style>
    .topnav {
    overflow: hidden;
    background-color: #333;

    }
    .topnav a:hover {
    background-color: #ddd;
    color: black;
    }
    .topnav a {
    float: left;
    color: #f2f2f2;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    font-size: 17px;
    }
    .status{
      /* text-align: center; */
      margin-left: auto;
      margin-right: auto;
      border: solid  red 2px;
      /* background-color: rgb(109, 77, 160); */
      /* width: 50%; */
    }

    .topnav a.active {
    background-color: #4CAF50;
    color: rgb(87, 43, 158);
    }

 table,td,th {
  border: 1px solid #ddd;
  /* padding: 1px; */

}



thead{
  background-color: blueviolet;
  text-align: center;
  text-transform: uppercase;
  text-decoration-color: #f2f2f2;
}
tr:nth-child(even){background-color: #f2f2f2;}
tr:hover {background-color: #ddd;}
/*  */
#Table,#resisTable,#bat_Table, #genset_Table{
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  /* border-collapse: collapse; */
  border-spacing: 1px;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}

      h2,h1{
          text-align: center;
      }
      .engine, .battery, .genset{
          display: block;
          margin-left: auto;
          margin-right: auto;
          border: solid plum 2px;
      }
      .powerSource{
        display: grid;
        grid-template-columns: auto ;
        grid-template-rows: 1fr;
        grid-auto-flow: column;
        margin: 20px;
         border: solid plum 2px;
      }
    
      
      .EEDI_main{
        border: solid #6d5757 2px;
      }
      .EEDI{
        width:100%;
      display: grid;
      grid-template-rows: 1fr;
       grid-auto-flow: column;
      }
      .ME_AE span:last-child{
        border: solid rgb(168, 33, 85) 2px;
        float: right;
        margin-right: 10px;
        padding: 5px;
      }
      .ME_AE span:first-child{
        margin-left: 28%;
        margin-right: 20px;
      }

      .EEDI_ME,.EEDI_ME{
        width : 110%;
       grid-row: 2;
       grid-column: 1;
       text-align: center;
       border : solid  rgb(75, 62, 95) 2px;
      }
      .EEDI_AE span,.EEDI_ME span{
        margin-right: 2px;
      }
      .MEAE2{
        width: 50px;
        margin-left: 2px;
        margin-right: 15px;
      }
      .MEAE{
        width: 10px;
        margin-top: 10px;
      }
      .pilotfuel{
        margin-left: 60px;
      }
      .pilotfuel select{
        padding: 4px;
        border: solid rgb(236, 175, 238) 2px;
      }
      /* .EEDI_opt span{
       margin-left: 15px;
      } */
      .EEDI_opt{
         width : 90%;
        margin-left : 10%;
       grid-row: 2;
       grid-column: 2;
       text-align: center;
       border : solid  rgb(75, 62, 95) 2px;
      }

    .range{
     width: 60%;
     margin-bottom: 20px;
     margin-top: 20px;

    }

    .grides{
    width: 60%;
     background-color:rgba(44, 81, 117, 0.7);
    display: grid;
    grid-template-rows: 1fr;
    grid-template-columns: 33% 33% 33%; 
    grid-auto-flow: column;
    /* margin: 30px; */
    margin: 15px;

    }
    .hull,.appendage,.SternBulbous,.simulation{
      width: 100%;

     /* background-color:rgba(44, 81, 117, 0.7); */
    display: grid;
    grid-template-rows: 1fr;
    grid-template-columns: 50% 50%;
    grid-auto-flow: column;
    /* margin: 30px; */
    margin: 15px;
    }

    .shipDimension{
        width: 50%;
        margin-left: 1px;
    }
    .newtest{
      /* display: flex; */
     /* justify-content: space-between; */
    }
    .spanNew{
      border: solid#ddd 2px;
      margin-right: 10px;
      float: right;
    clear: both;
    padding: 2px;
    }
    .hullDimension,.resistance ,.appendage {
        width: 100%;
        /* background-color:rgba(44, 81, 117, 0.7); */
        grid-template-rows: 1fr;
         grid-template-columns:  auto;
        grid-auto-flow: column;
        margin: 15px;
        margin-left: 0;
    }
    .hull > h2{
        text-align: center;
        grid-row: 1;
        grid-column: 1;

    }

    .resistance {
      border: solid 2px grey;
    grid-row: 2;
    grid-column: 2;
    }
    .hullDimension {
      border: solid 2px grey;
    grid-row: 2;
    grid-column: 1;
    }
    #resisTable{
      width: 90%;
      margin-top: 30px;
    }

    .appendage{
      width: 100%;
    grid-template-rows: 1fr;
    
    grid-auto-flow: column;
   
    }
    .inputArea{
        width: 50%;
    }
    .addedResistance{
      margin-left: 15px;
    }
   
     .area {
        /* border:  solid plum 2px; */
        grid-row: 1;
      grid-column: 1;
      margin-top: 10px;
      margin-bottom: 10px;
    }
    .area1 {
    /* display: grid; */
    grid-row: 2;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
      /* padding-left: 10px;; */
    }
    .area2 {
    /* display: grid; */
    grid-row: 3;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area3 {
    /* display: grid; */
    grid-row: 4;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area4 {
    /* display: grid; */
    grid-row: 5;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area5{
    /* display: grid; */
    grid-row: 6;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area6{
    /* display: grid; */
    grid-row: 7;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area7{
    /* display: grid; */
    grid-row: 8;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area8{
    /* display: grid; */
    grid-row: 9;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area9{
    /* display: grid; */
    grid-row: 10;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area10{
    /* display: grid; */
    grid-row: 11;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .area11{
    /* display: grid; */
    grid-row: 11;
    grid-column: 1;
    margin-top: 10px;
      margin-bottom: 10px;
    }
    .AirArea{
      margin: 15px;
      border: solid peachpuff 2px;
    }
    .airArea{
      width: 70%;
    }

    /* //Propeller */

    .propeller{
      margin: 15px;
    }
    .propellChoice{
      display: flex;
      flex-wrap: nowrap;
      margin-bottom: 20px;
    }
    .screw,.shaft {
      margin-left: 15px;
    }
  
    .propulsion_type input{
      margin-right: 5%;
    }.propulsion_type input:last-child{
      margin-right: 1%;
    }
    .propulsion_type span:first-child{
      margin-left: 4%;
    }
    

    .simulation{
     /* background-color:rgba(0, 2, 4, 0.7); */
     background-color:rgba(44, 81, 117, 0.7);
     width: 97%;
    display: grid;
    grid-template-rows: 1fr;
    grid-template-columns: auto; 
    grid-auto-flow: column;
    margin: auto;
    }
    .start_sim,.view_data{
      text-align: center;
      margin: 15px;
      /* color: rgb(104, 86, 86); */
      padding: 7px;
      font-size: 20px;
      cursor: pointer;
       background-color: rgb(77, 190, 73); 
      border :solid rgb(110, 100, 4) 2px;
      border-radius: 10px;
    }
    /* .start_sim.main{
      text-align: ce;
    } */
    .create_custo_bat,.create_custo_genset,.create_custo_engine
    {
     float: right;
     margin-right: 15%;
     padding: 6px;
     
    }
   .custom_button,.tableconfirm,.select_message_butt{
     padding: 12px;
     color: white;
     cursor: pointer;
     font-size: 20px;
     border-radius: 10px;
     border :solid hotpink 2px;
     background-color: rgb(46, 84, 88);
    }
    .sellected_pro{
     /* background-color:rgba(0, 2, 4, 0.7); */
     background-color:rgba(44, 81, 117, 0.7);
     width: 97%;
    display: grid;
    grid-template-rows: 1fr;
    grid-template-columns: auto; 
    grid-auto-flow: column;
    margin: auto;
   
    }
    .engine_perf,.close {
      padding: 12px;
      border: solid rgb(46, 117, 98) 2px;
     cursor: pointer;
     border-radius: 6px;
     font-size: 20px;
     margin:15px;
    }  

   .sim{
     width: 60px;
     margin-left: 10px;
   }
       .mainDashboard{
        
        display: flex;
        flex-wrap: nowrap;  
        background-color: #01040edb;
    }
    .mainDashboard > .dashboardControl{
        
       margin-left: 15px;
    }
    .dashboardControl{
   
    width: 40%;
     /* background-color:rgba(0, 2, 4, 0.7); */
     background-color:rgba(44, 81, 117, 0.7);
    display: grid;
    grid-template-rows: 1fr;
    /* grid-template-columns: 33% 33% auto; */
    grid-auto-flow: column;
    margin: 15px;
    margin-left: 0;
  
    }
  
   .profile input{
     margin-left: 5px;
   }

.testin{
        margin: 30px;
        color: green;
        font-size: 1.3em;
    }
    .chart{
        border: solid #333 2px;
        text-decoration-color: aqua;
        background-color:#91b3aea3;
    }
    .chartDisp{
        margin: 15px;
        color: aqua;
        font-size: 1.3em;
    }
    .engineInput{
        color: aqua;
        margin-left: 20px;
    }

    .hide {
    display: none;
    }
    .center{
      text-align: center;
    }

    .power{
    grid-row: 1;
    grid-column: 1;
    }
    .RPM{
    grid-row: 1;
    grid-column: 3;
    }
    .torque{
    grid-row: 1;
    grid-column: 2;
    }

    .loadwatt{
    grid-row: 2;
    grid-column: 2;
    }
    /* .SFOC{
     grid-row: 2;
      grid-column: 3;
    } */
      .column {
        flex: 50%;
        padding: 40px;
       }
       .row{
    display: flex;

     }
     #loadWattChart{

     }
     .powerOn{
       border: solid rgb(7, 7, 7) 5px;
       padding: 4px;
       margin-top: 12px;
       border-radius: 5px;
     }
     .done{
      border: solid rgb(7, 7, 7) 5px;
       padding: 4px;
       margin-top: 12px;
       float: right;
       margin-right: 6px;
     }
    .sim_ploting {
       display: grid; 
       grid-template-rows: 1fr; 
       grid-template-columns: 25% 30% 45%;   
     grid-auto-flow: column; 
    border: solid green 2px;
    }
    /* .darshboard_sim{
      border: solid pink 2px;
      width : 100%;
    } */
    #emission{

      position: relative;
     margin: auto;
     
     width: 100%;
    }
    #update_top{
   margin-bottom: 20px ;
    }

    /* .battandemiss{
      border:pink;
      width:35%
    }
    .darshboard_engines{
      border:rgb(51, 63, 199);
      width:25%
    }
    .sim_update{
      border:rgb(186, 194, 41);
      width:40%
    } */
    .darshboard_container{
      width: 100%;
      background-color:#072b39; 
      
      color: white;
      padding: 15px;
    }
    .c3-axis-y-label,.c3-axis-y,.c3-legend-item-tile  {
      stroke: #fff !important; 
    }
    .add_style{
      background-color: #f7f7f7;
      background-image: -webkit-gradient(linear, left top, left bottom, from(#f7f7f7), to(#e7e7e7));
      background-image: -webkit-linear-gradient(top, #f7f7f7, #e7e7e7);
      background-image: -moz-linear-gradient(top, #f7f7f7, #e7e7e7);
      background-image: -ms-linear-gradient(top, #f7f7f7, #e7e7e7);
      background-image: -o-linear-gradient(top, #f7f, #e7e7e7);
      color: #a7a7a7;
      margin: 36px;
      width: 144px;
      height: 144px;
      position: relative;
      text-align: center;
      line-height: 166px;
      /* border-radius: 50%; */
      box-shadow: 0px 3px 8px #aaa, inset 0px 2px 3px #fff;
    }
    .section{
      margin: 5px;
      border: solid #aaa 1px;
      box-shadow: 0px 3px 8px #daf, inset 0px 2px 3px #fff;

    }
    .span_disp{
      display: inline-block;
      margin: 10px;
      padding: 6px;
    }
    .darsh_top span{
     display: inline-block; 
      border: solid greenyellow 2px;
      margin-left: auto;
      border-radius: 20%;
      margin-bottom: 10px;
      padding: 5px;
      margin-top: 15px;
      margin-right: auto;
      text-align: center;
      box-shadow: 0px 3px 8px #aaa, inset 0px 2px 3px #fff;
    }
    .span_result{
      background-color: #092e45;
      display: inline-block; 
      color: #a7a7a7;
      margin: 10px;
      width: 80px;
      height: 80px;
      font-size: 12px;
      position: relative;
      text-align: center;
      border: solid #36e4f4 2px;
      line-height: 35px;
       border-radius: 50%;
      box-shadow: 0px 3px 8px #aaa, inset 0px 2px 3px #fff;
    }
    .live_data{
      color: #3bc140;
      font-size: 1.3em;
    }

   .addedMachinery{
         background-color:#051c26;
         width: 100%;
         margin-left: auto;
         margin-right: auto;
         
     }
     .img_display{
       transform: rotate(90deg);
       
     }
     .ship_move{
      animation: mymove 12s infinite;
      animation-timing-function: linear;
      position: relative;
     }
     @keyframes mymove {
      from{left: -30%;}
       to {left: 100%;}
     }

    </style>
    <div class="topnav">
        <a class="active" href="#home">Home</a>
        <a href="https://github.com/osain-az/Vessel-Machinery-Configuration">GitHub Rep</a>
        <a  href="information/index.html">information</a>
         <!-- <a href="Flowchat/"> Flowchat and Status </a> -->
         <!-- https://osain-az.github.io/Vessel-Machinery-Configuration/ -->
        <!-- <a href="#about"></a> -->
      </div>

    <!-- <p>This example demonstrates how to dynamically update a slider value with oninput.</p>

    this:<input type="range" step="5" oninput="myFunction(this.value)">
    <p id="demo"></p> -->
       <h1 class="status">Note: Site still under development, UI will be the last thing  </h1>

    <div class="main">
        <h1>Ship Machinery Configuration and Simulation</h1>
        <div>
            <h2>Hull dimensions  and resistance display </h2>
        <div class="hull" id="hull">


            <div class="hullDimension" id="hullDimension">
                <p>Speed : <input type="range" name="" class="shipDimension" id="shipSpeed" min="5" value="10.69" max="30" step="0.1" oninput="shipDimension(event)" ><span class="displayShipSpeed spanNew"id="displayShipSpeed"> </span> </p>
               <p>Waterline length Lwl: <input type="range" name="Lwl" class="shipDimension" id="Lwl" min="10" value="205" max="600" oninput="shipDimension(event)"><span class="displayLwl spanNew"id="displayLwl"> </span>
               <!-- <p>length btw perpendicular: Lpp: <input type="range" name="" class="shipDimension" id="" min="" value="" max=""><span class="inputValue"id="displayRPM"> </span></p> -->
               <!-- <p> Overall length: LoA: <input type="range" name="" class="shipDimension" id="" min="10" value="205" max=""> <span class="inputValue"id="displayRPM"> </span></p> -->
                <p> Breath: Bwl: <input type="range" name="" class="shipDimension" id="Bwl" min="5" value="32" max="50"oninput="shipDimension(event)" > <span class="displayBwl spanNew" id="displayBwl"> </span></p>
                <p>Draught T: <input type="range" name="" class="shipDimension" id="T" min="5" value="10" max="30"  oninput="shipDimension(event)"> <span class="displayT spanNew"id="displayT"> </span></p>
               <p> afterMost Draught TA <input type="range" name="" class="shipDimension" id="TA" min="5" value="10" max="20"  oninput="shipDimension(event)"> <span class="displayTA spanNew"id="displayTA"> </span> </p>
               <p>foremost Draught  Tf: <input type="range" name="" class="shipDimension" id="Tf" min="5" value="10" max="20"  oninput="shipDimension(event)"><span class="displayTf spanNew"id="displayTf" > </span> </p> <br>


               <div>
               <p class="newtest">ABT <input type="range" name="" class="shipDimension" id="ABT" min=10 value="13.4848" step="0.1" max="30"  oninput="shipDimension(event)"><span class="displayABT spanNew"id="displayABT"  > </span > </p>
               <p>hB <input type="range" name="" class="shipDimension" id="hB" min="0" value="4" step="0.1" max="20"  oninput="shipDimension(event)"><span class="displayhB  spanNew"id="displayhB"> </span> </p>
               <p>Transom AT <input type="range" name="" class="shipDimension" id="AT" min="3" value="16" step="0.1" max="30"  oninput="shipDimension(event)"><span class="displayAT spanNew"id="displayAT"> </span> </p>
               <div class="coefficient">
                <p>CB: <input type="range" name="" class="shipDimension" id="Cb" min="0" value="0.572" max="1" step="0.01"  oninput="shipDimension(event)"><span class="displayCb spanNew"id="displayCb" > </span> </p>
                <!-- <p>CP: <input type="range" name="" class="shipDimension" id="CP" min="0" value="" max="20"  oninput="shipDimension(event)"><span class="displayTf"id="displayTf" > </span> </p> -->
                <p>CM: <input type="range" name="" class="shipDimension" id="Cm" min="0" value="0.98" step="0.01" max="1"  oninput="shipDimension(event)"><span class="displayCm spanNew"id="displayCm" > </span> </p>
                <p>LCB at Lwl (%): <input type="range" name="" class="shipDimension" id="LCB" min="-5" value="1.53" step="0.1" max="6"  oninput="shipDimension(event)"><span class="displayLCB spanNew"id="displayLCB" > </span> </p>
                </div>
               <form action="" onchange="appendageCal(event)" class="">
               <h3>Appendage</h3>
                 <div class="appendage">
                 <div class="area">
                   <input type="checkbox" id="rudderBehindSkegCheck" name="Bilge Keel" value="">
                        <label for="Rudder behind skeg">  Rudder behind skeg </label>
                    <input type="range" name="" class="inputArea" id="rudderBehindSkeg" min="1.5" value="1.5" step="0.1" max="2"><span class="displayRudderBehindSkeg spanNew"id="displayRudderBehindSkeg"> </span> <br> <br>
                  Area : <input type="range" name="" class="inputArea" id="ArearudderBehindSkeg" min="0" value="0" step="0.1" max="60"><span class="RudderBehindSkeg spanNew"id="RudderBehindSkegArea"> </span> 
                </div>
                <div class="area1">
                    <input type="checkbox" id="rudderBehindSternCheck" name="Bilge Keel" value="">
                        <label for="Rudder behind Stern">  Rudder behind Stern </label>
                    <input type="range" name="" class="inputArea" id="rudderBehindStern" min="1.3" value="1.3" step="0.1" max="1.5"><span class="displayRudderBehindStern spanNew"id="displayRudderBehindStern"> </span> <br><br>
                  Area <input type="range" name="" class="inputArea" id="rudderBehindSternArea" min="0" value="0" step="0.1" max="60"><span class="displayRudderBehindStern spanNew"id="AreaRudderBehindStern"> </span>

                </div>

                 <div class="area2">
                    <input type="checkbox" id="SkegCheck" name="Skeg" value="">
                        <label for="Skeg">   Skeg  </label>
                  <input type="range" name="" class="inputArea" id="Skeg" min="1.5" value="1.5" step="0.1" max="2"><span class="displaySkeg spanNew"id="displaySkeg"> </span> <br> <br>
                  Area <input type="range" name="" class="inputArea" id="SkegArea" min="0" value="0" step="0.1" max="60"><span class="displaySkeg spanNew"id="displaySkegArea"> </span>

                </div>
                <div class="area3">
                    <input type="checkbox" id="ShaftsCheck" name="Shafts" value="">
                       <label for="Shafts">   Shafts  </label>
                      <input type="range" name="" class="shipDimension" id="Shafts" min="2" value="2" step="0.1" max="4"><span class="displayShafts spanNew"id="displayShafts"> </span> </p>
                    Area <input type="range" name="" class="inputArea" id="ShaftsArea" min="0" value="0" step="0.1" max="60"><span class="displayShafts spanNew"id="displayShaftsArea"> </span>
                 </div>
            </form>

                <form action="" onchange="appendageCal(event)" class="area11">
                    <input type="checkbox" id="BilgeKeelAreaCheck" name="Bilge Keel" value="">
                    <label for="Bilge Keel"> Bilge Keel  Area: </label>
                    <input type="range" name="" class="inputArea" id="BilgeKeelArea" min="0" value="0" step="0.1" max="50"><span class="displayBilgeKeel spanNew"id="displayBilgeKeel"> </span> <br><br>

                    <input type="checkbox" id="DomeAreaCheck" name="bulbous bow" value="">
                    <label for="Dome Area"> Dome  Area: </label>
                     <input type="range" name="" class="inputArea" id="DomeArea" min="0" value="0" step="0.1" max="50"><span class="displayDome spanNew"id="displayDome"> </span> <br>  <br>

                     <input type="checkbox" id="ShaftBracketAreaCheck" name="bulbous bow" value="">
                    <label for="Shafts Area"> Shafts Bracket  Area: </label>
                   <input type="range" name="" class="inputArea" id="ShaftBracketArea" min="0" value="0" step="0.1" max="50"><span class="displayShaftBracket spanNew"id="displayShaftBracket"> </span> <br><br>

                   <input type="checkbox" id="StrutBossingsAreaCheck" name="bulbous bow" value="">
                    <label for="Strut Bossings Area"> Strut Bossings  Area: </label>
                 <input type="range" name="" class="inputArea" id="StrutBossingsArea" min="0" value="0" step="0.1" max="50"><span class="displayStrutBossings spanNew"id="displayStrutBossings"> </span> <br> <br>

                 <!-- <input type="checkbox" id="ShaftsAreaCheck" name="bulbous bow" value="">
                    <label for="Shafts Area"> Shafts  Area: </label>
                <input type="range" name="" class="inputArea" id="ShaftsArea" min="0" value="0" step="0.1" max="50"><span class="displayShafts"id="displayShafts"> </span> <br> -->

                <input type="checkbox" id="StabilizerFinsCheck" name="bulbous bow" value="">
                    <label for="Stabilizer Fins Area"> Stabilizer Fins  Area: </label>
                 <input type="range" name="" class="inputArea" id="StabilizerFins" min="0" value="0" step="0.1" max="50"><span class="displayStabilizerFins spanNew"id="displayStabilizerFins"> </span> <br><br>

                <input type="checkbox" id="hullbossingCheck" name="Hull Bossings" value="">
                <label for="Hull Bossings"> Hull Bossings </label>
                <input type="range" name="" class="inputArea" id="hullBossings" min="0" value="0" step="0.1" max="50"><span class="displayHullBossings spanNew"id="displayHullBossings"> </span> <br><br>

                <input type="checkbox" id="thrustercheck" name="thruster" value="thruster">
                <label for="Thruster"> Thruster </label>
                diameter : <input type="range" name="" class="inputArea" id="thrusterDiameter" min="0" value="0" step="0.1" max="15"><span class="displaythrusterDiameter spanNew"id="displaythrusterDiameter"> </span> <br> <br>
                numbers of thruster : <input type="range" name="" class="inputArea" id="thrusterNO" min="1" value="2" step="" max="10"><span class="displayHullBossings spanNew"id="displaythrusterNO"> </span> <br>
                  </form>
                </div>
                <div class="SternBulbous">
                  <div class="stern "  >
                    <strong>choose Stern Shape</strong>
                  <select class="" onchange= "sternType(event)" id="stern">
                    <option value="U&Hogner" selected>U with Hogner</option>

                   <!-- <option value="" ><strong>Choose engine</strong> </option> -->
                   <option value="V"> V</option>
                   <option value="Normal"> Normal</option>
                   <option value="PramWithGondola">Pram With Gondola</option>

                   </select>

                </div>

                 <div>
                 <form action=""onchange="appendageCal(event)">
                    <input type="checkbox" id="bulbous" name="bulbous bow" value="bulbous">
                    <label for="bulbous bow"> Bulbous bow</label><br>
                  </form>
                </div>

              </div>
              <div>
                <form action=""onchange="appendageCal(event)">
                   <input type="checkbox" id="Roughness" name="Roughness" value="Roughness">
                   <label for="Roughness"> Roughness above 150 μm</label><br>
                 </form>

               </div>

               <div class="AirArea">
                 <h3>The area projection of the hull and the supper structure</h3>
                Area : <input type="range" name="" class="airArea" id="AirArea" min="0" value="0" step="0.1" max="30" oninput="shipDimension(event)"><span class="displayAirArea spanNew"id="displayAirArea"> </span> <br> <br>

               </div>

               <div class="addedResistance">
                <h3>Added Resistance </h3>
                 <div class="waveResis">
                   <h3>Wave Resistance</h3>
                  wave significant height : <input type="range" name="" class="inputArea" id="H" min="0" value="0" step="0.01" max="15" oninput="shipDimension(event)"><span class="displayH spanNew"id="displayH"> </span> <br> <br>
                 </div>

              </div>

            </div>
        </div>
        <div class="resistance">
          <div id="resistanceGraph">

          </div>
          <div  id="resistanceTable" class="">
            <table id="resisTable" class="Table">
              <thead>

                <th colspan="12">Different Resistance </th>

              </thead>
              <thead>

                <th colspan="">Resistance</th>
                <th colspan=""> kN</th>
              </thead>
              <tr>
                <td>Frictional </td>
                <td><span id="Fr">0</span></td>
              </tr>
              <tr>
                <td>Wave making</td>
                <td><span id="Rw">0</span></td>
              </tr>
              <tr>
                <td>Appendages</td>
                <td><span id="Rapp">0</span></td>
              </tr>
              <tr>
                <td>thruster resistance</td>
                <td><span id="Rtb">0</span></td>
              </tr>
              <tr>
                <td>pressure bulbous bow</td>
                <td><span id="Rb">0</span></td>
              </tr>
              <tr>
                <td>pressure at Transom</td>
                <td><span id="Rtr">0</span></td>
              </tr>
              <tr>
                <td>Mid-ship Correlation</td>
                <td><span id="RA">0</span></td>
              </tr>
              <tr>
                <td>Air resistance</td>
                <td><span id="RAA">0</span></td>
              </tr>
              <tr>
                <td>Fouling Resistance </td>
                <td><span id="Rfouling">0</span></td>
              </tr>
              <tr>
                <td>Wave resistance  </td>
                <td><span id="Rwave">0</span></td>
              <!-- </tr>
              <td>Wave m </td>
              <td><span id="Rwave">0</span></td>
            </tr> -->
              <tr>
                <td>Total Calm water resistance</td>
                <td><span id="RT_calm">0</span></td>
              </tr>
              <td>Total Resistance </td>
              <td><span id="RT">0</span></td>
            </tr>
            </table>

            <div class="propeller" onchange="propellers(event)">
              <h2>Propeller dimension and parameters</h2>
              <h2></h2>
              <form action="" >
              Propeller D: <input type="range" name="" class="inputArea" id="D" min="1" value="6" step="0.01" max="12"><span class="displayD spanNew"id="displayD"> </span> <br> <br>
              N0 of blades Z : <input type="range" name="inputArea" class="inputArea" id="Z" min="2" value="4" step="1" max="7"><span class="displayZ spanNew"id="displayZ"> </span> <br> <br>
              Ae/Ao : <input type="range" name="" class="inputArea" id="AeAo" min="0.3" value="0.70" step="0.05" max="1.05"><span class="displayAeAo spanNew"id="displayAeAo"> </span> <br> <br>
              P/D : <input type="range" name="" class="inputArea" id="PD" min="0.5" value="0.7" step="0.1" max="1.4"><span class="displayPD spanNew"id="displayPD"> </span> <br> <br>
              Advance N0 J : <input type="range" name="" class="inputArea" id="J" min="0" value="0.4" step="0.01" max="2"><span class="displayJ spanNew"id="displayJ"> </span> <br> <br>
            </form>
           </div>
              
            <div class="propellChoice">
              <div class="reductionGear">
            
                <input type="checkbox" id="gear" name="Reduction Gear" value="thruster" onchange="propellers(event)">
                <label for="Reduction Gear">Reduction Gear </label>
              </div>
                    
              <div class="screw">
                <strong>Choose Screw type</strong>
                <select class="" onchange="Shaft(event)" id="screw">
                  <option value="singleScrew" selected id="">Single Screw</option>
                <option value="TwinScrew"> Twin Screw</option>
                </select>
              </div>
            </div>
            <div class="propellerTable">
              <table id="propellerTable" class="Table">
                <thead>
                  <th colspan="12">Propeller parameters using  Wageningen B-Screw Series  </th>
                </thead>
                <thead>
  
                  <th colspan="">Parameters</th>
                  <th colspan=""> Values</th>
                </thead>

                <tr>
                  <td>Wake </td>
                  <td><span id="wake">0</span></td>
                </tr>
                <tr>
                  <td>KT</td>
                  <td><span id="KT">0</span></td>
                </tr>
                <tr>
                  <td>KQ</td>
                  <td><span id="KQ">0</span></td>
                </tr>
                <tr>
                  <td>Hull efficiency </td>
                  <td><span id="NH">0</span></td>
                </tr>
                <tr>
                  <td>Open water efficiency  </td>
                  <td><span id="No">0</span></td>
                </tr>
                <tr>
                  <td>Thrust factor</td>
                  <td><span id="thrustFactor">0</span></td>
                </tr>
                <tr>
                  <td>advance propeller speed </td>
                  <td><span id="Va">0</span></td>
                </tr>
                <tr>
                  <td>propeller speed n  rpm </td>
                  <td><span id="propeller_speed">0</span></td>
                </tr>
                <!-- <tr>
                  <td>Thrust loading Cth</td>
                  <td><span id="Cth">0</span></td>
                </tr> -->
                <tr>
                  <td>Thrust T</td>
                  <td><span id="thrust">0</span></td>
                </tr>
                
                <tr>
                  <td>Thrust Power</td>
                  <td><span id="thrustP">0</span></td>
                </tr>

              <tr>
                  <td> Power delivered to propeller </td>
                  <td><span id="Pd">0</span></td>
                </tr>
               <tr>
                  <td>Effective power </td>
                  <td><span id="Pe">0</span></td>
                </tr>
                <tr>
                  <td>Break  Power </td>
                  <td><span id="pb">0</span></td>
                </tr>
                <!-- <tr>
                <td>SMCR  Power </td>
                <td><span id="smcr">0</span></td>
              </tr>  -->
              </table>
            </div>
    </div>
      </div>
    </div>
    <div  class="EEDI_main hide">
      <h2>EED1 Emission index calculation </h2>
      <p class="center"> <strong >To calculate the emission index of the vessel/ship according to EEDI, the Main and Auxiliary engine parameter are needed. Choose which to start with: </strong>
      </p>
       <form action="" onchange="EEDI_emission(event)" class="ME_AE">
      <span><input type="radio" name="EEDI" id="radio_ME" value="Main engine"><strong> Main engine parameters</strong></span>
      <input type="radio" name="EEDI" id="radio_AE" value="Main engine"> <span><strong> Auxiliary Engine parameters</strong></span>
      <span id="EEDI_phase" class="" ><strong> activate phase 3</strong> <input type="checkbox" name="EEDI" id="phase" class="phase" value="" > </span>
      <span id="radio_EEDI" class="hide" ><strong> close section</strong> <input type="radio" name="EEDI" id="radio_close" class="close" value="closed page" > </span>
       </form>
    <div class="EEDI" id="EEDI">
      
      <div class="EEDI_ME hide" id="EEDI_ME"onchange="EEDI_emission(event)">
        <form action="" class="EEDI_AE_form" >
          <h3 class="center"> Main Engine and fuel type</h3>
          <p><strong>Note: before inputting any value click the check icon of the type of engine </strong></p>
          <input type="checkbox" name="EEDI" id="ME_LNG_MDO" value="ME_LNG_MDO" class="MEAE">  <span>D_F (LNG_MDO) engine  Power kW :  </span> <input type="text" name="" id="ME_LNG_MDO_power" class="MEAE2"> <span></span>  <span>N0. of engine </span> <input type="text" name="" id="ME_LNG_MDO_NO" class="MEAE2"> <span></span><span>SFOC g/kwh:</span><input type="text" name="" id="ME_LNG_MDO_SFOC"class="MEAE2"><br> <br>
          <span>Shaft Motor power<input type="text" name="" id=""></span> <br> <br>
          <span>Shaft Generator power <input type="text" name="" id=""></span><br> <br>

          <input type="checkbox" name="EEDI" id="ME_LNG_HFO" value="" class="MEAE">  <span>D_F (LNG_HFO) engine  Power kW :  </span> <input type="text" name="" id="ME_LNG_HFO_power" class="MEAE2"> <span></span>  <span>N0 of engine:</span> <input type="text" name="" id="ME_LNG_HFO_NO" class="MEAE2"><span></span> <span> SFOC g/kwh:</span><input type="text" name="" id="ME_LNG_HFO_SFOC" class="MEAE2"><br><br>
          <span>Shaft Motor power<input type="text" name="" id=""></span> <br> <br>
          <span>Shaft Generator power <input type="text" name="" id=""></span> <br> <br>

           <input type="checkbox" name="EEDI" id="ME_LNG_MGO" value="" class="MEAE">  <span>D_F (LNG_MGO) engine  Power kW :  </span> <input type="text" name="" id="ME_LNG_MGO_power" class="MEAE2"> <span></span>  <span>N0 of engine:</span> <input type="text" name="" id="ME_LNG_MGO_NO" class="MEAE2"><span></span> <span> SFOC :</span><input type="text" name="" id="ME_LNG_MGO_SFOC" class="MEAE2"><br><br>
           <span>Shaft Motor power<input type="text" name="" id=""></span> <br> <br>
          <span>Shaft Generator power <input type="text" name="" id=""></span> <br> <br>

           <span class="pilotfuel" id="pilotfuel"><span> Dual Engine Pilot Fuel </span>
           <span>Shaft Motor power<input type="text" name="" id=""></span> <br> <br>
           <span>Shaft Generator power <input type="text" name="" id=""></span> <br> <br>
 
           <select name="" id="pilot_fuel" >
            <option value=""><strong>Choose Fuel</strong> </option>
            <option value="MDO">MDO</option>
            <option value="HFO">HFO</option>
          </select>
          <span>SFOC g/kwh:</span><input type="text">
        </span><br><br>
          <input type="checkbox" name="EEDI" id="ME_LNG" value="ME_LNG" class="MEAE">  <span> LNG fuel engine  Power kW :  </span> <input type="text" name="" id="ME_LNG_power" class="MEAE2"> <span></span>  <span>N0 of engine:</span><input type="text" name="" id="ME_LNG_NO" class="MEAE2"><span></span> <span> SFOC g/kwh:</span><input type="text" name="" id="ME_LNG_SFOC" class="MEAE2"><br><br>
          <span>Shaft Motor power<input type="text" name="" id=""></span> <br> <br>
          <span>Shaft Generator power <input type="text" name="" id=""></span> <br> <br>
          <input type="checkbox" name="EEDI" id="ME_MGO" value="ME_MGO" class="MEAE">  <span> MGO fuel engine  Power kW :  </span> <input type="text" name="" id="ME_MGO_power" class="MEAE2"> <span></span>  <span>N0 of engine:</span><input type="text" name="" id="ME_MGO_NO" class="MEAE2"> <span></span><span> SFOC g/kwh:</span><input type="text" name="" id="ME_MGO_SFOC" class="MEAE2"><br><br>
          <span>Shaft Motor power<input type="text" name="" id=""></span> <br> <br>
          <span>Shaft Generator power <input type="text" name="" id=""></span> <br> <br>

          <input type="checkbox" name="EEDI" id="ME_MDO" value="ME_MDO" class="MEAE">  <span> MDO fuel engine  Power kW :  </span> <input type="text" name="" id="ME_MDO_power" class="MEAE2"> <span></span>  <span>N0 of engine:</span><input type="text" name="" id="ME_MDO_NO" class="MEAE2"> <span></span><span>SFOC g/kwh:</span><input type="text" name="" id="ME_MDO_SFOC" class="MEAE2"><br><br>
          <span>Shaft Motor power<input type="text" name="" id=""></span> <br> <br>
          <span>Shaft Generator power <input type="text" name="" id=""></span> <br> <br>

          <input type="checkbox" name="EEDI" id="ME_HFO" value="ME_HFO" class="MEAE">  <span> HFO fuel engine  Power kW :  </span> <input type="text" name="" id="ME_HFO_power" class="MEAE2"> <span></span>  <span>N0 of engine:</span><input type="text" name="" id="ME_HFO_NO" class="MEAE2"><span></span> <span> SFOC g/kwh:</span><input type="text" name="" id="ME_HFO_SFOC" class="MEAE2"><br><br>
          <span>Shaft Motor power<input type="text" name="" id=""></span> <br> <br>
          <span>Shaft Generator power <input type="text" name="" id=""></span> <br> <br>
        </form>
      </div>
      <div class="EEDI_AE hide" id="EEDI_AE">
           <form action="" class="EEDI_AE_form" onchange="EEDI_emission(event)">
             <h3 class="center"> Auxiliary Engine and fuel type</h3>
              <input type="checkbox" name="EEDI" id="AE_LNG_MDO" value="AE_LNG_MDO" class="MEAE">  <span>Dual Fuel (LNG_MDO) engine  Power kW :  </span> <input type="text" name="" id="AE_LNG_MDO_power"> <span></span>  <span>N0 of engine </span> <input type="text" name="" id="AE_LNG_MDO_NO"> <span></span><br> <br>
              <input type="checkbox" name="EEDI" id="AE_LNG_HFO" value="" class="MEAE">  <span>Dual Fuel  (LNG_HFO) engine  Power kW :  </span> <input type="text" name="" id="AE_LNG_HFO_power"> <span></span>  <span>N0 of engine </span> <input type="text" name="" id="AE_LNG_HFO_NO"> <span> SFOC</span><input type="text" name="" id="AE_LNG_HFO_NO"><br><br>
              <input type="checkbox" name="EEDI" id="AE_LNG_MGO" value="" class="MEAE">  <span>Dual Fuel (LNG_MGO) engine  Power kW :  </span> <input type="text" name="" id="AE_LNG_MGO_power"> <span></span>  <span>N0 of engine </span> <input type="text" name="" id="AE_LNG_MGO_"> <span></span><br><br>
              <input type="checkbox" name="EEDI" id="AE_LNG" value="AE_LNG" class="MEAE">  <span> LNG fuel engine  Power kW :  </span> <input type="text" name="" id="AE_LNG_power"> <span></span>  <span>N0 of engine </span> <input type="text" name="" id="AE_LNG_NO"> <span></span><br><br>
              <input type="checkbox" name="EEDI" id="AE_MGO" value="AE_MGO" class="MEAE">  <span> MGO fuel engine  Power kW :  </span> <input type="text" name="" id="AE_MGO_power"> <span></span>  <span>N0 of engine </span> <input type="text" name="" id="AE_MGO_NO"> <span></span><br><br>
              <input type="checkbox" name="EEDI" id="AE_MDO" value="AE_MDO" class="MEAE">  <span> MDO fuel engine  Power kW :  </span> <input type="text" name="" id="AE_MDO_power"> <span></span>  <span>N0 of engine </span> <input type="text" name="" id="AE_MDO_NO"> <span></span><br><br>
              <input type="checkbox" name="EEDI" id="AE_HFO" value="AE_HFO" class="MEAE">  <span> HFO fuel engine  Power kW :  </span> <input type="text" name="" id="AE_HFO_power"> <span></span>  <span>N0 of engine </span> <input type="text" name="" id="AE_HFO_NO"> <span></span><br><br>
           </form>
      </div>
      <div class="EEDI_opt"onchange="EEDI_emission(event)">
        <span><strong>Choose ship type : </strong></span>
        <select name="" id="">
          <option value="">Ship type</option>
          <option value="BulkCarrier"> Bulk Carrier </option>
          <option value="GasCarrier"> Gas Carrier </option>
          <option value="Tanker"> Tanker </option>
          <option value="Containership">container ship </option>
          <option value="GeneralCargo"> General Cargo Ship </option>
          <option value="RefrigeratedCargo"> Refrigerated Cargo carrier </option>
          <option value="combinationCarrier"> Combination carrier </option>
          <option value="LNGCarrier">LNG carrier </option>
          <option value="RoRoVehicleCarrier"> Ro-ro cargo Vehicle Carrier </option>
          <option value="RoRoCargoShip"> Ro-ro cargo ship </option>
          <option value="RoRoPassengerShip"> Ro-ro Passenger ship  </option>
          <option value="CruiseShip"> Passenger cruise ship </option>
        </select> <br><br>
      </span>
        
        <span> <strong>DeadWeight : </strong><input type="text" name="" id="" class="MEAE2"></span>
        <span> <strong> Tonnage weight : </strong><input type="text" name="" id="" class="MEAE2"></span> <br><br>
        <span id="LNGCarrier_check" class="hide">
          <span> Diesel electric</span>  <input type="checkbox" name="" id="LNG_DE" > <br>
        </span>
        <span>Shaft Motor installed <input type="checkbox" name="" id=""></span> <br>
        <span>Shaft Generator installed <input type="checkbox" name="" id=""></span>
      </div>
    </div>
    <div class="EEDI_results center" id="EEDI_results">
      <h3>EEDI Calculated Result</h3>
      <span class="EEDI_result" id="EEDI_result"></span>
    </div>
  </div>
    <div class="prop_system">
    <div class= > 
       <h2> Propulsion System </h2>
      <form class="propulsion_type" onchange="dispProSystem(event)">
       <span>mechanical Propulsion</span> <input type="radio" name="Propulsion" id="ME_pro" value="ME"> 
        <span>Diesel Electric Propulsion</span> <input type="radio" name="Propulsion"id="DE_pro" value="DE"> 
       <span>Hybrid DE and ME</span><input type="radio" name="Propulsion" id="DE_ME_pro" value="DE_ME">
        <span>Hybrid: DE and battery</span><input type="radio" name="Propulsion" id="DE_Bat_pro" value="DE_Battery" >  
        <span>Battery Electric </span><input type="radio" name="Propulsion" id="battery_E" value="battery_E" > 
      </form>
   </div>  
        <div class="powerSource column" id="powerSource" >
        <div class="engine_source">
          
            <strong><p class="center">choose engine model</p></strong>
          <select class="engine" onchange="displayEngineType(event)" id="engine_select">
           <option value="" selected><strong>Choose engine</strong> </option>
           <!-- <option value="kongsberg">Kongsberg</option> -->
           <option value="wartsila 32">Wartsila 32</option>
           <option value="wartsila 46F">Wartsila 46F</option>
           <!-- <option value=""></option>
           <option value=""></option> -->
           </select>
          </div>
         <div class="battery_source" >
           <strong><p class="center">Choose Battery model </p></strong>
           <select class="battery" onchange="displayBatteryType(event)" id="battery_select">
            <option value="" selected><strong> choose Battery pack </strong> </option>
            <!-- <option value="kongsberg">Kongsberg</option> -->
            <option value="Orca_Energy">corvus Orca Engergy </option>
            <option value="Blue_Whale">Corvus Blue Whale</option>
            <!-- <option value=""></option>
            <option value=""></option> -->
            </select>
          </div>

          <div class="GenSet_source" >
            <strong><p class="center">Choose Generator set </p></strong>
            <select class="genset" onchange="displayGenSetType(event)" id="genset_select">
 
             <option value="" selected><strong> Choose Genset  </strong> </option>
             <!-- <option value="kongsberg">Kongsberg</option> -->
             <option value="Wärtsilä_34DF">Wärtsilä 34DF  </option>
             <option value="Wärtsilä_31DF">Wärtsilä 31DF</option>

             </select>
           </div>
          
           <div class="disp_sim_envirnmt" onchange="display_sim(event)">
             <span><input type="checkbox" name="" id="sim_check"><strong>Open simulation</strong> </span> <br><br>
             <span><input type="radio" name="use_result" id="use_result" checked ><strong>Use calculated result</strong></span> <br>
             <span><input type="radio" name="use_result" id="define_result"><strong>Define new propulsion power</strong></span> <br>
           </div>
        </div>
       </div>
        <div class="sim_environment hide" id="sim_environment">
              <h3 class="center">Simulation inputs and parameters configuration</h3>
          <form name="myform" onsubmit="preview(event)" id="view_data">
           <div class="simulation " id="simulation" >  
              <div class="profile" id="profile" onchange="sim_data(event)">
                <strong><span>Ship/Vessel Operation</span></strong> <br> <br>
                 <span> <input type="checkbox" name="" id="transit" >Transit : </span> 
                 <span class="transit hide" id="transit_span">Voyage nautical mile <input type="text"  name="" class="sim" id="transit_dis">
                </span> 
                <br><br>
                 <span>  <input type="checkbox" name="" id="standby" >Stand by : </span> 
                 <span id="standby_time_span" class="hide"> time (Hr)<input type="text" name="" class="sim" id="standby_time"></span>
                 <br><br>
                 <span>  <input type="checkbox" name="" id="DP">DP operation :</span>
                 <span id="DP_time_span" class="hide"> Operation time (Hr)<input type="text" name="" class="sim" id="DP_time"></span>
                 <br><br>
                 <span>  <input type="checkbox" name="" id="harbor">Harbor : </span>
                 <span id="harbor_time_span" class="hide"> time (Hr)<input type="text" name="" class="sim" id="harbor_time"></span>
                 <br><br>
              </div>
              <div onchange="sim_data(event)">
                <strong><span>Simulation environment </span></strong><br><br>
                <span> <input type="checkbox" name="" id="calm_sim">  Calm water</span><br><br>
                <span>  <input type="checkbox" name="" id="None_calm_sim"> None Calm water </span><br><br>
                <span class="wave hide" id="wave"><span>max significant Wave height (m) : </span><input type="text" name="" id="wave_height" class="sim">
                <br><br></span> 
                <span>Simulation time (minutes) <input type="text" name="" class="sim" id="sim_time"></span>
              </div>
                <div class="load_profile" onchange="sim_data(event)">
                  <strong><span>Load Profile : </span></strong><br><br>
                     <span>Auxiliary Load kW : <input type="text" name="" id="aux_load_input" class="sim"></span> 
                     <span id="aux_load_disp"></span><br><br>
                     <span id="propulsion_input" class="">Propulsion Load kW<input type="text" name="" id="main_load" class="sim"></span> 
                     <span id="main_load_load_disp"></span><br><br>
                     <span><input type="submit" value="preview selected data " class="view_data" id="viewdata"></span>
                </div>  

              </div>
                <!-- <div class="start_sim_main center" >
                  <span><input type="submit" value="Start Simulation" class="start_sim" id="start_sim" disabled></span>
                   <span></span>
               </div> -->
              
             <!-- <input type="submit" value="preview selected data " class="view_data" id="view_data"> -->
            </form>
           </div>
          
         <div class="sellected_disp hide" id="sellected_disp" >
           <h3 class="center"> selected and parameters and input data </h3>
           <div class="sellected_pro">
             <div class="main_pro">
             <strong><span>Main Engine</span></strong><br><br>
             <span>Engine Power: </span> <span id="main_eng_power_dis"></span><br>
             <span>engine RPM: </span> <span id="main_engine_rpm"></span><br>
             <span>N0.of engines: </span> <span id="no_engines"></span><br>
             <span>installed power: </span><span id="main_installed_power"></span> <br>
             <span>Propulsion power :</span> <span id="propulsion_p"></span >
            </div>
           <div class="aux_pro">
             <strong><span>Auxiliary Engine</span></strong><br><br>
             <span><strong>Engine Power :</strong> </span> <span id="aux_eng_power_dis"></span><br>
             <span><strong>engine RPM : </strong></span> <span id="aux_engine_rpm"></span><br>
             <span><strong>N0. of engines :</strong> </span> <span id="aux_no_engines"></span><br>
             <span><strong>Auxiliary Load :</strong> </span><span id="aux_load"></span> <br>
             <span><strong>installed power :</strong> </span><span id="aux_installed_power"></span> <br>  
           </div>
           <div class="battery_pro">
            <strong><span>Battery pack</span></strong><br><br>
            <span><strong>battery capacity :</strong> </span> <span id="b_capacity"></span><br>
            <span><strong>c_rate : </strong></span> <span id="c_rate"></span><br>
            <span><strong>c_rate peak : </strong></span> <span id="c_rate_peak"></span><br>
            <span><strong>voltage :</strong> </span><span id="volt_pro"></span> <br>
            <span><strong>Charge/discharge power :</strong> </span><span id="charge_power"></span> <br>

            <span><strong>DOD :</strong> </span><span id="DOD_pro"></span> <br>  
            <span><strong>SOC</strong> </span><span id="SOC_pro"></span> <br> <br> 
          </div>
           <div class="gen_pro">
            <strong><span>General info</span></strong><br><br>
             <strong><span>Propulsion type : </span> </strong> <span id="chose_propulsion"></span><br>
             <strong> <span>Total installed power</span> </strong><span id="Total_inst_power"></span> <br>
             <strong><span>Simulation time : </span ></strong><span id="simulate_time"></span> <br>
             <span><input type="button" value="Start Simulation" class="start_sim" id="start_sim" disabled></span>

           </div>
         </div > 
       </div>
       <div class="hide center" id="select_message" >
              <input type="button" value="" id="select_message_butt" class="select_message_butt center"> <br><br>
              <input type="button" value="Test engine performance" id="engine_perf" class="engine_perf" onclick="display_sim(event)">
              <input type="button" value="close" id="close" class="close" onclick="display_sim(event)">


    
       </div>
         <div  id="engineTable" class=" hide">
              <div class="create_custo_engine hide" id="custom_engine" onclick="displayEngineType(event)">
                <input type="button" value="create customized engine" class="custom_button" id="custom_engine">
              </div>
              <form  onsubmit="displayEngineType(event)"  class="custom">
              <table id="Table" class="Table" onchange="custom_engine_genset(event)">
                <thead>
                  <th colspan="3"></th>
                </thead>
                <tr>
                  <td></td>
                  <td></td>
                </tr>
              </table>
            </form>
      </div>
            <div id="batteryTable" class=" hide">
              <div class="create_custo_bat" onclick="displayBatteryType(event)">
                <input type="button" value="create customized Pack" class="custom_button" id="custom_battery">
              </div>
              <form  onsubmit="displayBatteryType(event)" class="custom">
              <table id="bat_Table" class="bat_Table" onchange="custom_bat_pack(event)" >
                <thead>
                  <th colspan="3"></th>
                </thead>
                <tr>
                  <td></td>
                  <td></td>  
                </tr>
              </table>
            </form>
      </div>

      <div  id="gensetTable" class=" hide" >
        <div class="create_custo_genset hide" id="custo_genset" onclick="displayGenSetType(event)">
          <input type="button" value="create customized genset" class="custom_button" id="custom_genset" >
         </div>
        <form onsubmit="displayGenSetType(event)" class="custom" >
        <table id="genset_Table" class="genset_Table" onchange="custom_engine_genset(event)" >
          <thead>
            <th colspan="3"></th>
          </thead>
          <tr>
            <td></td>
            <td></td>
          </tr>
        </table>
      </form>
  </div>
        <div id="mainDashboard" class="mainDashboard hide">

         <div id="engineDashboard" class="grides">
                <div class="power chartDisp" >
                    <p>Engine rated power </p>
                    <div id="powerChart" class="chart"></div>
                </div>
                <div class="torque chartDisp" id="torque">
                    <p>Engine Torque kNm</p>
                    <div id="torqueChart" class="chart"></div>
                </div>
                <div class="RPM chartDisp" id="RPM">
                    <p>Engine Speed RPM</p>
                    <div id="RPMchart" class="chart"></div>
                </div>
                <div class="load chartDisp" >
                <p>Engine load in %</p>
                    <div id="loadChart" class="chart">
                </div>
            </div>
                <div class="loadwatt chartDisp" id="loadwatt">
                    <p>Engine load kW</p>
                    <div id="loadWattChart" class="chart"></div>
                </div>
                <div class="SFOC_chart chartDisp" id="SFOC_chart">
                    <p> current SFOC </p>
                    <div id="sfocChart" class="chart"></div>
              </div>
            </div>
        <div class="dashboardControl">

            <!-- parameters control and configuration  -->
            <div class="engineInput">
              <h2> Test engine performance </h2> 
              <h3 class="center">using below paramters</h3>

              <form  id="simple_form" class="form">

              <p class="P_range testing" >Speed RPM : <input type="range" step="10" id="RPM" class="range" onchange= "getValues(event)"  oninput="myFunction(this.value)"> or
               <input type="text" placeholder="input engine speed.." onchange="getValues(event)"  id="RPMInput"><span class="inputValue"id="displayRPM"> </span><br> </p>

               <p class="P_range">Load %: <input type="range" max="98" min="10"id="load" class="range" step="2" onchange="getValues(event)"oninput="loadSfoc(this.value)" > or
             <input type="text" placeholder="input engine load %.." onchange="getValues(event)"  id="loadInput"><span  class="inputValue" id="loadDisplay"> </span><br> </p>

              <p class="P_range" >Desired Power kW: <input type="range" step="2" id="power" class="range" onchange="getValues(event)" oninput="powerSfoc(this.value)" > or
               <input type="text" placeholder="input Power.."onchange="getValues(event)"  id="powerInput">
              <span  class="powerDisplay" id="powerDisplay"> </span> </p>

              </form>
              <div onclick="powerOn(event)" >
                <button class="powerOn" id="powerOn"><strong>Power On Engine </strong></button>
                <input type="button" value="Done" class="done" id="done">
              </div>    
      
          </div>
          </div>
        </div>
              <!-- grapph ploting here -->
         <div class="SFOC" id="SFOC">
             <div id="plot" class="plot"></div>
         </div>
         <div class="darshboard_container">
        <div class="sim_ploting"> 
          <div class="darshboard_engines section" >
          <div class="section" id="result_darshboard_main">  
             <div class="darsh_top center" > <span>Propulsion system</span></div> 
             <span class="span_result "><span id="main_install_darsh" class="live_data"></span> <br>Power kW</span> 
            <span class="span_result"> <span id="main_load_darsh" class="live_data" > </span> <br> load kW </span> <br>
             <span class="span_result">  <span id="main_no_engines_darsh" class="live_data"> </span> <br> engines</span> 
             <span class="span_result">  <span id="main_active_engine_darsh" class="live_data"> </span> <br> Active engine</span> <br>
            <span class="span_result">  <span id="main_FC_darsh" class="live_data"></span> <br>FC tons</span>
            <span class="span_result">  <span id="main_sfoc_darsh" class="live_data"></span> <br>sfoc g/kWh</span> <br>
          </div>
          <div class="section" id="result_darshboard_Aux">
              <div class="darsh_top center"><span> Auxiliary system</span> </div> <br>
              <div>
                  <span class="span_result">  <span id="aux_install_darsh" class="live_data"> </span> <br> power kW</span> 
                  <span class="span_result">  <span id="aux_load_darsh" class="live_data"> </span  > <br> Load kW </span> <br>
                  <span class="span_result">   <span id="aux_no_engines_darsh" class="live_data"></span> <br> engines</span> 
                  <span class="span_result">  <span id="aux_active_engine_darsh" class="live_data"> </span> <br> active engines </span> <br>
                  <span class="span_result">  <span id="aux_FC_darsh"  class="live_data"> </span> <br> FC tons</span> 
                  <span class="span_result">  <span id="aux_sfoc_darsh" class="live_data"> </span> <br> sfoc g/kWh</span> <br>
            </div>
          </div>
         </div>

        <div class="battandemiss section" >
          <div class="section" id="">
            <div class="darsh_top center"><span>Battery pack</span></div>
            <span class="span_result"> <span id="capacity_darsh" class="live_data"> </span > <br>Capacity kWh </span> 
            <span class="span_result">  <span id="soc_darsh" class="live_data"></span > <br>SOC kWh</span> <br>
            <span class="span_result">  <span id="c_rate_darsh" class="live_data"></span > <br>C rate</span> 
            <span class="span_result">  <span id="c_rate_peak_darsh" class="live_data"></span > <br>C peak</span>
            <span class="span_result"> <span id="DOD_darsh" class="live_data"></span > <br>DOD </span> <br>
          </div>
           <div class="section">
            <div class="darsh_top center"><span>Emissions Chart</span></div>
            <div class="emission" id="emission">
              <canvas id="emission_chart"></canvas>
            </div>
           </div>
           <div class="general section "> 
            <div>
              <span class="span_disp span_result">  <span id="ETA" class="live_data"></span > <br> ETA </span>
              <span class="span_disp span_result"> <span id="speed_show" class="live_data"></span > <br> Speed Knt </span>
              <span class="span_disp span_result">  <span id="wave_height_show" class="live_data"></span > <br> wave heingt</span>
              <span class="span_disp span_result"> <span id="distance_Mils" class="live_data"></span ><br> Nautical Mils </span>
            </div>
          </div>
        </div>

        <div class="sim_update section">
          <div class="update section" >
            <div class="darsh_top center" id="update_top"> <span>Update parameter</span></div>
            <div class="center">
           <span> Adjust speed <input type="range" name="" id=""></span> <br><br>
           <span>wave  
            <input type="checkbox" name="" id="">
            <span class="wave" id="wave_update"><span>max Wave height (m) : </span><input type="text" name="" id="wave_height" class="sim" onchange="sim_data(event)">
          </span> <br><br>
          <span class="span_disp"> adjust hotel load <input type="range" name="" id=""></span> <br><br>
          </div>
        </div>
          <div class=" section" id="">
            <div id="result" class="result"></div>
          </div>
        </div>
      </div>
      
       
   </div>
    </div>

    <div class="addedMachinery">
      <h2>The chose machinery will be dispplay here  </h2>
       <div class="ship_move" id="ship_move">
        <img src="https://images.pexels.com/photos/1556991/pexels-photo-1556991.jpeg?auto=compress&cs=tinysrgb&h=750&w=1260" alt=" Ship simulation" class="img_display">

       </div>

    </div>

    <script>

    let data, data2, RPM, Power,enginetype,speedRPM, engineStrokes, meanPressure,cylinderBore,pistonStroke,sfoc_cal,sfoc_cal_aux,
    enginePower,engine_loadPercent, LHV,fuelType,ratedPower,ratedSfoc, rpm_min, rpm_max, torque,load,supplier,ratedSpeed,
    minLoad, minPower,T, TA, Tf, Bwl, Lwl, shipSpeed, shipSpeedKnots, rudderBehindSkeg, rudderBehindStern, bilgeKeel, dome, stabilizerFins, shafts,
    hullBossings, strutBossings, skeg, shaftBracket, TwinScrewBalaRudder, Fn, Rn, Cb, Cm, Cp, Cwp, g, shipVolume, Cf, density, hB, ABT, AT, stern,inputShipVolume,
    Am, Awl,Rw,bulbous, sternId, lcb, Lpp, LOA,iE,Rw_A, Rw_B, Rb, Rtr, RA, Rf, Rbt,Rapp, Sa,domeCheck,StaFins,shaftsCheck,sBossings,sBracket,bKeel,thruster,K2,dt,Sapp,
    formFactor,intervalResis,D,Z,J,AeAo,PD,W, KQ,KT,thrust,Ca,Pe,Pt,NH,NR, nShafts, No, NB,ND,NT,Cv,Cth,Va,TFactor,n, RAA,Av,roughness,screw, Rwave,H,Rfoul,RT_calm,SM,
    Ns,Pb,RPM_pro,SMCR,Ptotal,engine_torque,propel_speed,simulate,DP_time, habor_time,standby_time,aux_ratedSpeed,No_of_eng,No_of_genset,aux_load,main_inst_power,
    star_time,end_time,power_aval,transit_time, FC_total, FC,calm_simulate, aux_enginePower,aux_inst_power,create_type,sellected_genset,sellected_battery,sellected_engine,propulsion_syst,
    gen_supplier,FC_ton,FC_ton_aux, main_engine_power,aux_engineStrokes,aux_meanPressure,aux_cylinderBore,aux_cylinders,aux_pistonStroke,aux_ratedsfoc,main_enginePower,energyChart,
    LNG_emission


 // Major constant
 viscosity = 0.0000012 // m/s^2
 g = 9.81  // m/s^2
 density = 1025 // kg/m^3
 density_air = 1.225




 resistanceDisplay ()

 function resistanceDisplay (){


var resistance = {
  type: 'scatter',
  x: [],
  y: [],
}

var resistData = [ resistance ]
var layout = {

  xaxis:
	{
        range: [0, 30],
        showgrid: false,
        title: 'Ship speed in knots'
    },
    yaxis:{
        showgrid: false,
        range: [0, 1500],
        title: 'kN'

    },
    title: 'Resistance curve  ',

//   plot_bgcolor: 'yellow',
  // width:600,
  // height:600,
//   paper_bgcolor: 'purple'


};
const config = {responsive: true}
Plotly.newPlot('resistanceGraph',resistData,layout,config);

 

// const  interval = setInterval(function() {
  
//   Plotly.extendTraces('resistanceGraph', {
//     x: [[shipSpeedKnots]],
//     y: [[RT]]
//   }, [0], 10000)
//   console.log("testing")
//   if( intervalResis > 1){clearInterval(interval)};
// }, 100);

}


function sfocDisplay (){
  const main_sfoc = {
  type: 'scatter',
  x: [],
  y: [],
  name: "Main engine SFOC",
}
const Aux_sfoc = {
  type: 'scatter',
  x: [],
  y: [],
  name: "Auxiliary engine SFOC",
}

// //   plot_bgcolor: 'yellow',
//   width:600,
//   height:400,
// //   paper_bgcolor: 'purple'
const datas = [ main_sfoc, Aux_sfoc]
const layout = {

  xaxis:
	{
        range: [0, 100],
        showgrid: false,
        title: 'engine load in %',
        rangemode:"tozero",
    },
    yaxis:{
        showgrid: false,
          range: [150,220],
        rangemode:"tozero",
        title: 'SFOC'

    },
   title: 'Live SFOC Vs engine load % ',
//   plot_bgcolor: 'yellow',
  // width:600,
  // height:600,
//   paper_bgcolor: 'purple'

  };
  const config = {responsive: true}


  Plotly.newPlot('plot',datas,layout,config);

}

function LiveResult(){
  
  const auxLoad = {
  type: 'scatter',
  x: [],
  y: [],
  name: 'Auxilary load',
}
const mainLoad = {
  type: 'scatter',
  x: [],
  y: [],
  name: 'Propulsion load',
}
const mainPower = {
  type: 'scatter',
  x: [],
  y: [],
  name: 'propulsion power',
}
const auxPower = {
  type: 'scatter',
  x: [],
  y: [],
  name: 'Auxilary power',
}
// //   plot_bgcolor: 'yellow',
//   width:600,
//   height:400,
// //   paper_bgcolor: 'purple'
const datas = [ auxLoad,mainLoad,mainPower,auxPower]
const layout = {
  font: {
    family: 'Courier New, monospace',
    size: 16,
    color: '#3bc140'
  },
  legend: {
    x: 0.5,
    xanchor: 'center',
    y: 1
  },
  xaxis:
	{
        //  range: [0,],
        showgrid: false,
        title: 'time millisecond',
        rangemode:"tozero",
    },
    yaxis:{
        showgrid: false,
        // range: [100, 220],
         rangemode:"tozero",
        title: 'Power kW '
    },
   title: 'Energy/power monitor  ',
   plot_bgcolor: '#3b1c50',
  // width:600,
  // height:600,
   paper_bgcolor: '#072b39'

  };
  const config = {responsive: true}

  Plotly.newPlot('result',datas,layout,config);

}
let myChart
 emission()
function emission(){
  const ctx = document.getElementById('emission_chart');
   myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['CO2', 'SOX', 'NOx', 'NMVOC', 'PM'],
        datasets: [{
            label: 'Main engines',
            data: [80, 19, 3, 5, 2],
            backgroundColor:  'rgba(75, 192, 192, 0.2)',
            borderColor:'rgba(255, 159, 64, 1)',
            borderWidth: 1,
            
           
        },
           {
            label: 'Hotel engines',
            data: [150, 30, 16,4 , 2],
            backgroundColor:  'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255, 159, 64, 1)',
            borderWidth: 2,
            
        }]
    },
    options: {
      tooltips:{
      mode: 'index',
      },
      legend:{
        position: 'bottom',
        align: 'center',
        labels: {
                text: "",
                fontColor: 'rgb(255, 99, 132)'
            },
      },
      title:{
        display: true,
        //  text: 'emission '
       },
        scales: {
            yAxes: [{
              scaleLabel:{
                    display: true,
                    labelString: 'tons',
                    fontColor: '#3bc140'
                 },
                ticks: {
                    beginAtZero: true,
                    fontColor:'#3bc140',
                    callback: function(value, index, values) {
                        return  value;
                    }
                }
            }]
        }
    }
});

}
function engery (){
  
   const ctx = document.getElementById('emission_chart');
   energyChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['CO2', 'SOX', 'NOx', 'NMVOC', 'PM', 'Orange'],
        datasets: [{
            label: 'Main engines',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor:  'rgba(75, 192, 192, 0.2)',
            borderColor:'rgba(255, 159, 64, 1)',
            borderWidth: 1
        },
           {
            label: 'Auxiliary engines',
            data: [22, 30, 16, , 2, 3],
            backgroundColor:  'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255, 159, 64, 1)',
            borderWidth: 2
        }]
    },
    options: {
      tooltips:{
      mode: 'index',
      },
      legend:{
        position: 'bottom',
        align: 'center',
        labels: {
                text: "testing wathebv",
                fontColor: 'rgb(255, 99, 132)'
            },
      },
      title:{
        display: true,
         text: 'emission '
       },
        scales: {
            yAxes: [{
              scaleLabel:{
                    display: true,
                    labelString: 'testing',
                    fontColor: '#894'
                 },
                ticks: {
                    beginAtZero: true,
                    callback: function(value, index, values) {
                        return '$' + value;
                    }
                }
            }]
        }
    }
 });

}

function powerDisplay (){
var chart = c3.generate({

    bindto: '#powerChart',

    data: {
        columns: [
            ['Engine power', enginePower*0.01]
        ],
        type: 'gauge',
        onclick: function (d, i) { console.log("onclick", d, i); },
        onmouseover: function (d, i) { console.log("onmouseover", d, i); },
        onmouseout: function (d, i) { console.log("onmouseout", d, i); }
    },

    gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
        },
    min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
    max: enginePower, // 100 is default
    units: '  kW',
    width: 39 // for adjusting arc thickness

    },

    color: {
        pattern: ['#FF0000', '#F97600', '#F6C600', '#60B044'], // the three color levels for the percentage values.
        threshold: {
//            unit: 'value', // percentage is default
//            max: 200, // 100 is default
            values: [enginePower*0.25, enginePower*0.33, enginePower*0.6, enginePower]
        },

    },
    size: {
        height: 150
    }
});

setTimeout(function () {
    chart.load({
        columns: [['Engine power', enginePower*0.1]]
    });
}, 1000);

setTimeout(function () {
    chart.load({
        columns: [['Engine power', enginePower*0.5]]
    });
}, 2000);

setTimeout(function () {
    chart.load({
        columns: [['Engine power', enginePower]]
    });
}, 3000);
}

function torqueDisplay (){
    let torqueMax,i
    i = 10
    console.log("torque",torque)
    console.log("torque max")
    torqueMax = i+torque

var chart1 = c3.generate({

  bindto: '#torqueChart',

  data: {
      columns: [
          ['Torque', 10]
      ],

      type: 'gauge',
      onclick: function (d, i) { console.log("onclick", d, i); },
      onmouseover: function (d, i) { console.log("onmouseover", d, i); },
      onmouseout: function (d, i) { console.log("onmouseout", d, i); }
  },
  gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
      },
  min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
  max: torqueMax, // 100 is default
 units: ' kNm',
  width: 39 // for adjusting arc thickness

  },

  color: {
      pattern: ['#FF0000','#F43500', '#b2d2c2'], // the three color levels for the percentage values.
      threshold: {
//            unit: 'value', // percentage is default
        //   max: (200), // 100 is default
          values: [torque/3,torque/2, torque ]
      },

  },
  size: {
      height: 150
  }
});

setTimeout(function () {
    chart1.load({
        columns: [['Torque', torque/3]]
    });
}, 5000);

setTimeout(function () {
    chart1.load({
        columns: [['Torque', torque/2]]
    });
}, 7000);
setTimeout(function () {
    chart1.load({
        columns: [['Torque', torque]]
    });
}, 9000);


}

function rpmDisplay(){
    if(!speedRPM){
        speedRPM = ratedSpeed 
    }
    
    var chart2 = c3.generate({
   
    bindto: '#RPMchart',
      
    data: {
        columns: [
            ['Speed', speedRPM]
        ],
        type: 'gauge',
        onclick: function (d, i) { console.log("onclick", d, i); },
        onmouseover: function (d, i) { console.log("onmouseover", d, i); },
        onmouseout: function (d, i) { console.log("onmouseout", d, i); }
    },
    gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
      },
  min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
  max: ratedSpeed+10, // 100 is default
 units: '  rpm',
  width: 39 // for adjusting arc thickness

  },

    color: {
        pattern: ['#FF0000', '#F97600', '#F6C600', '#60B044'], // the three color levels for the percentage values.
        threshold: {
//            unit: 'value', // percentage is default
//            max: 200, // 100 is default
            values: [speedRPM*0.25, speedRPM*0.5, speedRPM*0.7, speedRPM]
        }
    },
    size: {
        height: 150
    }
});

setTimeout(function () {
    chart2.load({
        columns: [['Speed', speedRPM*0.01]]
    });
}, 1000);

setTimeout(function () {
    chart2.load({
        columns: [['Speed', speedRPM*0.3]]
    });
}, 2000);

setTimeout(function () {
    chart2.load({
        columns: [['Speed', speedRPM*0.7]]
    });
}, 3000);

setTimeout(function () {
    chart2.load({
        columns: [['Speed', speedRPM]]
    });
}, 5000);

}


function loadDisplay(){
    if(!engine_loadPercent){
        engine_loadPercent = 0
    }

var chart4 = c3.generate({

  bindto: '#loadChart',

  data: {
      columns: [
          ['Load', engine_loadPercent]
      ],

      type: 'gauge',
      onclick: function (d, i) { console.log("onclick", d, i); },
      onmouseover: function (d, i) { console.log("onmouseover", d, i); },
      onmouseout: function (d, i) { console.log("onmouseout", d, i); }
  },
  gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
      },
  min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
  max: 100, // 100 is default
 units: ' %',
  width: 39 // for adjusting arc thickness

  },

  color: {
      pattern: ['#FF0000', '#FF0000', '#FF0000', '#FF0000', '#FF0000'], // the three color levels for the percentage values.
      threshold: {
//            unit: 'value', // percentage is default
          // max: 200, // 100 is default
          values: [20, 40, 60, 80, 100]
      }
  },
  size: {
      height: 150
  }
});

if(load){
setTimeout(function () {
  chart4.load({
      columns: [['Load',engine_loadPercent]]
  });
}, 1000);

}

// setTimeout(function () {

// }, 6000);
// let k = sfoc_cal

    var interval = setInterval(function() {

        chart4.load({
          columns: [['Load', engine_loadPercent]]
      });

      }, 1000);
//  if( > 10) clearInterval(interval);

 ;


}

function loadWattDisplay (){
    if(!load){
        load = 0
    }

var chart3 = c3.generate({


  bindto: '#loadWattChart',

  data: {
      columns: [
          ['engine load', ratedPower*1]
      ],

      type: 'gauge',
      onclick: function (d, i) { console.log("onclick", d, i); },
      onmouseover: function (d, i) { console.log("onmouseover", d, i); },
      onmouseout: function (d, i) { console.log("onmouseout", d, i); }
  },
  gauge: {
      label: {
          format: function(value, ratio) {
              return value;
          },
          show: true // to turn off the min/max labels.
      },
  min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
  max: ratedPower*1, // 100 is default
 units: '  kW',
  width: 39 // for adjusting arc thickness

  },

  color: {
      pattern: ['#F97600','#F97600', '#F97600' ,'#F97600'], // the three color levels for the percentage values.
      threshold: {
//            unit: 'value', // percentage is default
          // max: 200, // 100 is default g
          values: [load*0.25, load*0.5, load*0.8, load*0.9]
      }
  },
  size: {
      height: 150
  }
});
var interval = setInterval(function() {

chart3.load({
  columns: [['engine load',load]]
});

// if( > 10) clearInterval(interval);
}, 100);

setTimeout(function () {
  chart3.load({
      columns: [['engine load', load]]
  });
}, 2000)

}

function currentSfocDisplay (){
    let sofocdisplay
    if(!sfoc_cal){
        sfoc_cal = ratedSfoc
        if(!sfoc_cal){
          sfoc_cal = aux_ratedsfoc
        }
    }
    
    var chart4 = c3.generate({

      bindto: '#sfocChart',

      data: {
          columns: [
              ['sfoc', sfoc_cal]
          ],

          type: 'gauge',
          onclick: function (d, i) { console.log("onclick", d, i); },
          onmouseover: function (d, i) { console.log("onmouseover", d, i); },
          onmouseout: function (d, i) { console.log("onmouseout", d, i); }
      },
      gauge: {
          label: {
              format: function(value, ratio) {
                  return value;
              },
              show: true // to turn off the min/max labels.
          },
      min: 0, // 0 is default, //can handle negative min e.g. vacuum / voltage / current flow / rate of change
      max: 220, // 100 is default
     units: '  g/kWh',
      width: 39 // for adjusting arc thickness

      },

      color: {
          pattern: ['#FF0000','#F97600','#60B044'], // the three color levels for the percentage values.
          threshold: {
    //            unit: 'value', // percentage is default
              // max: 200, // 100 is default g
              values: [160, 179,184]
          }
      },
      size: {
          height: 150
      }
    });

    // setTimeout(function () {
    //   chart1.load({
    //       columns: [['sfoc', sfoc_cal]]
    //   });
    // }, 1000);

    var interval = setInterval(function() {

        chart4.load({
          columns: [['sfoc', sfoc_cal]]
      });

        // if( > 10) clearInterval(interval);
      }, 100);


    }
    let x = 0

    function appendageCal(event){
         let BKA,SkegCheck, RBSCheck,RBSkegCheck,hullBossings,thrustersCheck,thrustersNO,thrusterD, bulbousCkeck,
         StaFinsVal, bKeelVal,domeCheckVal, sBracketVal,sBossingsVal,shaftsCheckVal,RBS,RBStern,
       Skeg,RBSArea,RBSternArea,SkegArea,shafts,hullBossingsVal,
        s1, s2, s3, s4, s5, s6, s7, s8, s9, s10,k2_1,k2_2,k2_3,k2_4,k2_5,k2_6,k2_7,k2_8,k2_9, k2_10,i
        i = 0

         bulbousCkeck = document.getElementById("bulbous").checked
         roughness = document.getElementById("Roughness").checked

         RBSkegCheck = document.getElementById("rudderBehindSkegCheck").checked
         RBSCheck = document.getElementById("rudderBehindSternCheck").checked
         SkegCheck = document.getElementById("SkegCheck").checked
         domeCheck = document.getElementById("DomeAreaCheck").checked
         StaFins = document.getElementById("StabilizerFinsCheck").checked
          shaftsCheck = document.getElementById("ShaftsCheck").checked
         sBossings = document.getElementById("StrutBossingsAreaCheck").checked
         sBracket = document.getElementById("ShaftBracketAreaCheck").checked
         bKeel = document.getElementById("BilgeKeelAreaCheck").checked
         hullBossings = document.getElementById("hullbossingCheck").checked
         thrustersCheck = document.getElementById("thrustercheck").checked

         RBSArea= document.getElementById('ArearudderBehindSkeg').value
         RBSternArea= document.getElementById('rudderBehindSternArea').value
         SkegArea= document.getElementById('SkegArea').value
         domeCheckVal = document.getElementById('DomeArea').value
         StaFinsVal = document.getElementById('StabilizerFins').value
          shaftsCheckVal = document.getElementById('ShaftsArea').value
         bKeelVal = document.getElementById('BilgeKeelArea').value
         sBracketVal = document.getElementById('ShaftBracketArea').value
         hullBossingsVal = document.getElementById('hullBossings').value
         sBossingsVal = document.getElementById('StrutBossingsArea').value

      //  StaFinsVal = document.getElementById('StabilizerFins').value
       document.getElementById('displayStabilizerFins').innerHTML= StaFinsVal + " m^2"

      //  bKeelVal = document.getElementById('BilgeKeelArea').value
       document.getElementById('displayBilgeKeel').innerHTML= bKeelVal + " m^2"

      //  domeCheckVal = document.getElementById('DomeArea').value
       document.getElementById('displayDome').innerHTML= domeCheckVal + " m^2"

      //  sBracketVal = document.getElementById('ShaftBracketArea').value
       document.getElementById('displayShaftBracket').innerHTML= sBracketVal + " m^2"

      //  sBossingsVal = document.getElementById('StrutBossingsArea').value
       document.getElementById('displayStrutBossings').innerHTML= sBossingsVal + " m^2"

         document.getElementById('displayHullBossings').innerHTML= hullBossingsVal + ""

         thrusterD = document.getElementById('thrusterDiameter').value
        thrustersNO = document.getElementById('thrusterNO').value
   document.getElementById('displaythrusterDiameter').innerHTML= thrusterD + " m"
  document.getElementById('displaythrusterNO').innerHTML= thrustersNO


     RBS= document.getElementById('rudderBehindSkeg').value
  document.getElementById('displayRudderBehindSkeg').innerHTML=RBS +" "
//  RBSArea= document.getElementById('ArearudderBehindSkeg').value
  document.getElementById('RudderBehindSkegArea').innerHTML= RBSArea + " m^2"

  RBStern= document.getElementById('rudderBehindStern').value
  document.getElementById('displayRudderBehindStern').innerHTML= RBStern +" "
//  RBSternArea= document.getElementById('rudderBehindStern').value
 document.getElementById('AreaRudderBehindStern').innerHTML= RBSternArea

  Skeg= document.getElementById('Skeg').value
  document.getElementById('displaySkeg').innerHTML= Skeg +" "
//  SkegArea= document.getElementById('SkegArea').value
  document.getElementById('displaySkegArea').innerHTML= SkegArea

//  shaftsCheckVal = document.getElementById('ShaftsArea').value
  document.getElementById('displayShaftsArea').innerHTML= shaftsCheckVal
  shafts = document.getElementById('Shafts').value
  document.getElementById('displayShafts').innerHTML= shafts

        //  let s1, s2, s3, s4, s5, s6, s7, s8, s9, s10,Sapp
        //  s1 to to s10 represent the weted area of the individual appenadge
        //  Sappp  is the total wtted of all the appendages

        if(RBSkegCheck=== true && RBSArea > 0){
         RBS= document.getElementById('rudderBehindSkeg').value
         k2_1 = (RBSArea * RBS)/RBSArea
         s1 = RBSArea *1
         i = 1
        }else{
            k2_1  = 0
            s1 = 0
        }
        if(RBSCheck=== true && RBSternArea > 0){
            RBStern= document.getElementById('rudderBehindStern').value
            k2_2 = (RBSternArea * RBStern)/RBSternArea
            s2 = RBSternArea*1
            i = 1
        }else{
            k2_2 =0
            s2 = 0
        }

        if(SkegCheck===true && SkegArea > 0){
          Skeg= document.getElementById('Skeg').value
            k2_3 = (SkegArea * Skeg)/SkegArea
            s3 = SkegArea*1
            i = 1
        }else{
            k2_3 =0
            s3 = 0
        }
        if(domeCheck===true && domeCheckVal > 0){
            //Dome
            k2_4 = (2.7* domeCheckVal)/domeCheckVal
            s4 = domeCheckVal*1
            i = 1
        }else{
            k2_4 = 0
            s4 =0
        }
        if(StaFins === true && StaFinsVal > 0){
            k2_5 = (2.8 * StaFinsVal)/StaFinsVal
            s5 = StaFinsVal*1
            i = 1
        }else{
            k2_5 = 0
            s5 = 0
        }
        if(shaftsCheck === true && shaftsCheckVal > 0 ){
            shafts = document.getElementById('Shafts').value
            k2_6 = (shafts * shaftsCheckVal)/shaftsCheckVal
            s6 = shaftsCheckVal*1
            i = 1
        }else{
            k2_6 = 0
            s6 = 0
        }
        if(bKeel === true && bKeelVal > 0){
            k2_7 = (1.4* bKeelVal)/bKeelVal
            s7 = bKeelVal*1
            i = 1
        }else{
            k2_7 = 0
            s7 = 0
        }
        if(sBossings === true && sBossingsVal > 0){
            k2_8 = (3 * sBossingsVal)/sBossingsVal
            s8 =  sBossingsVal*1
            i = 1
        }else{
            k2_8 = 0
            s8 = 0
        }
        if(sBracket === true && sBracketVal > 0){
            k2_9 = (3* sBracketVal)/sBracketVal
            s9 =  sBracketVal*1
            i = 1
        }else{
            k2_9 = 0
            s9 = 0
        }
        if(hullbossingCheck === true && hullBossingsVal > 0){
            k2_10 = ((2* hullBossingsVal )/hullBossingsVal)*1
            s10 = hullBossingsVal*1
            i = 1
        }else{
            k2_10 = 0
            s10 = 0
        }
        Sapp = s1+s2+s3+s4+s5+s6+s7+s8+s9+s10

        if(Sapp <= 0){

          Sapp = 1
        }

       K2 =  k2_1+k2_2+k2_3+k2_4+k2_5+k2_6+k2_7+k2_8+k2_9+ k2_10
      //
      //Check if thrusters are fitted on the vessel
      if(thrustersCheck=== true){
        // dt means thruster diamter
        thruster = thrustersCheck
         dt = thrusterD * thrustersNO

        i = 1

      }else{
        dt = 0
      }
      
      //Check if bulbous bow is fitted on the vessel
      if(bulbousCkeck===true){
         bulbous = bulbousCkeck
         i = 1
      }else{
        bulbous = bulbousCkeck
        i = 1
      }

    
    x++
    if(i >0 || x>=2){
      updateResistance()
      
    }
   
    
     }

   sternType()
 appendageCal(event)
 shipDimension(event)
 

 function shipDimension(event){

 shipSpeedKnots = document.getElementById('shipSpeed').value
 document.getElementById('displayShipSpeed').innerHTML= shipSpeedKnots + " knots"
 shipSpeed = shipSpeedKnots* 0.5144
 Lwl = document.getElementById('Lwl').value
 Lwl = Lwl*1
 document.getElementById('displayLwl').innerHTML= Lwl + " m"

 Bwl = document.getElementById('Bwl').value
 document.getElementById('displayBwl').innerHTML= Bwl + " m"
 Bwl = Bwl*1
 T = document.getElementById('T').value
 T = T*1
 document.getElementById('displayT').innerHTML= T + " m"


 TA = document.getElementById('TA').value
 TA = TA*1
 document.getElementById('displayTA').innerHTML= TA + " m"

 Tf = document.getElementById('Tf').value
 Tf = Tf*1
 document.getElementById('displayTf').innerHTML= Tf + " m"

 ABT = document.getElementById('ABT').value
 ABT = ABT*1
 document.getElementById('displayABT').innerHTML= ABT + " m^2"

 hB = document.getElementById('hB').value
 hB= hB*1
 document.getElementById('displayhB').innerHTML= hB + " m"
//Immersed part area of the Transverse transom
 AT = document.getElementById('AT').value
 AT = AT*1
 document.getElementById('displayAT').innerHTML= AT + " m^2"

 //Angle of entrance
//  iE = document.getElementById('iE').value
//  document.getElementById('displayiE').innerHTML= iE + " Degree"

 Cb = document.getElementById('Cb').value
 Cb = Cb*1
 document.getElementById('displayCb').innerHTML= Cb

 Cm = document.getElementById('Cm').value
 Cm = Cm*1
 document.getElementById('displayCm').innerHTML= Cm
 //
 lcb = document.getElementById('LCB').value
 lcb = lcb*1
 document.getElementById('displayLCB').innerHTML= lcb

 Av = document.getElementById('AirArea').value
 Av = Av*1
 
 document.getElementById('displayAirArea').innerHTML= Av + " m^2"

 H = document.getElementById('H').value
 document.getElementById('displayH').innerHTML= H + " "




 updateResistance()
}


function sternType(event){

  sternId = document.getElementById('stern').value
  screw = document.getElementById('screw').value
    if(sternId === "Normal"){
            stern = 0 
      }
     else if(sternId === "V"){
             stern = -10
      }
     else if(sternId === "U&Hogner"){
            stern = 10
     }
     else if(sternId === "PramWithGondola"){
            stern = -25
      }
         updateResistance()
}

function displayResistance(){
  document.getElementById('Fr').innerHTML=  Rf + " "
  document.getElementById('Rw').innerHTML=  Rw+ " "
  document.getElementById('Rapp').innerHTML=  Rapp+ " "
  document.getElementById('Rtb').innerHTML=  Rbt+ " "
  document.getElementById('Rtr').innerHTML=  Rtr+ " "
  document.getElementById('RA').innerHTML=  RA+ " "
  document.getElementById('RAA').innerHTML=  RAA+ " "
  document.getElementById('Rb').innerHTML=  Rb + " "
  document.getElementById('Rwave').innerHTML=  Rwave + " "
  document.getElementById('Rfouling').innerHTML=  Rfoul + " "
 
  document.getElementById('RT_calm').innerHTML=  RT_calm + " "

  document.getElementById('RT').innerHTML=  RT+ " "
  
}

function Shaft(event){
  const EventID  = event.target.id
  const EventVal  = event.target.value 
  if(EventVal ==="single"){
    nShafts = EventVal
  }
  else if(EventVal ==="double"){
    nShafts = EventVal
  }
  propellers(event)
}

function propellers(event){
 
// const EventID  = event.target.id
// const EventVal  = event.target.value
 
  D = document.getElementById('D').value
  PD = document.getElementById('PD').value

  Z = document.getElementById('Z').value
  J = document.getElementById('J').value
  AeAo = document.getElementById('AeAo').value
  let reducionGear
  reducionGear = document.getElementById("gear").checked
  if(reducionGear ===true){
    Ns = 0.95
  }else{
    Ns = 0.98
  }
  // if(!nShafts){
  //   nShafts= document.getElementById('singleSaft').value
  // }

  document.getElementById('displayD').innerHTML=  D + " "
  document.getElementById('displayZ').innerHTML=  Z+ " "
  document.getElementById('displayJ').innerHTML=  J+ " "
  document.getElementById('displayAeAo').innerHTML=  AeAo+ " "
  document.getElementById('displayPD').innerHTML=  PD + " "
    
    // if(EventID ===)
 propeller.Thrust()
 
  propeller.wake()
  propeller.KTandKQ()
  
  // propeller.efficiencies()
  propeller.power()
  Engine_Marine.Margin()

  if(!KT){
    KT = 0
    KQ = 0
    // W = 0
  }

   document.getElementById('wake').innerHTML=  W + " "
   document.getElementById('KT').innerHTML=  KT+ " "
   document.getElementById('KQ').innerHTML=  KQ+ " "
   document.getElementById('Pe').innerHTML=  Pe + " kW"
   document.getElementById('Pd').innerHTML=  Pd + " kW"
   document.getElementById('thrustP').innerHTML=  Pt + " kW"
   document.getElementById('thrust').innerHTML=  thrust + " kN"
   document.getElementById('No').innerHTML=  No + " "
   document.getElementById('NH').innerHTML=  NH + " "
   document.getElementById('thrustFactor').innerHTML=  TFactor + " "
  //  document.getElementById('Cth').innerHTML=  Cth + " "
  document.getElementById('pb').innerHTML=  Pb + " kW"

   document.getElementById('Va').innerHTML=  Va + " m/s"
  //  document.getElementById('smcr').innerHTML=  SMCR + " kW"
   document.getElementById('propeller_speed').innerHTML=  propel_speed + " rad/s"
}


function updateResistance(){
let c,k,val,i,s
      intervalResis = 0
     s = shipSpeedKnots*0.5144
    val = shipSpeedKnots;
    resistanceDisplay ()

    //  n = 20
        c = 1
        i = 0
      for ( k = 1; k < val;k ++) {
       
        if(val-k > 1 ){
             shipSpeed = k*0.5144
             shipSpeedKnots = k  
              }
              else if(val-k <= 1){
                shipSpeed = s
                shipSpeedKnots = val
                 calResistnace.totalResistance()
                if(RT){
                  displayResistance()     
                 intervalResis = 2
                 
                 propellers()
                
                //  resistanceDisplay ()
                }
              }
          calResistnace.totalResistance()
          console.log("new speed", shipSpeed)
 
          Plotly.extendTraces('resistanceGraph', {
            x: [[shipSpeedKnots]],
            y: [[RT]]
          }, [0], 100)
          
        }       
}

let lastRPM;
let i = 1;

function loadSfoc(val){
    // this is for the percentage Range slider
 document.getElementById('loadDisplay').innerHTML= val + " engine load %"
//  load = (val/100)*enginePower
//  engine_loadPercent = val
// // EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)

// if(i <= 1){
//  sfocDisplay ()
// }
// i++

}

// function EEDI_emission(event){
//  //  http://www.imo.org/en/OurWork/Environment/PollutionPrevention/AirPollution/Documents/245(66).pdf
//  //  http://www.imo.org/en/OurWork/Environment/PollutionPrevention/AirPollution/Documents/245(66).pdf
//   // http://www.imo.org/en/OurWork/Environment/PollutionPrevention/AirPollution/Documents/Air%20pollution/M2%20EE%20regulations%20and%20guidelines%20final.pdf

//   const EventID = event.target.id
//   const check = event.target.checked
//   const ship_type = event.target.value
//   const EventVal = event.target.value
//   let P_ME, P_AE,N0,MCR

//   const ME_LNG_MDO_check =  document.getElementById("ME_LNG_MDO").checked
//   const ME_LNG_HFO_check =  document.getElementById("ME_LNG_HFO").checked
//   const ME_LNG_MGO_check =  document.getElementById("ME_LNG_MGO").checked
//   const ME_LNG_check =  document.getElementById("ME_LNG").checked
//   const ME_MGO_check =  document.getElementById("ME_MGO").checked
//   const ME_MDO_check =  document.getElementById("ME_MDO").checked
//   // const ME_MGO_check =  document.getElementById("ME_MGO").checked

//   const AE_LNG_MDO_check =  document.getElementById("ME_LNG_MDO").checked
//   const AE_LNG_HFO_check =  document.getElementById("ME_LNG_HFO").checked
//   const AE_LNG_MGO_check =  document.getElementById("ME_LNG_MGO").checked
//   const AE_LNG_check =  document.getElementById("ME_LNG").checked
//   const AE_MGO_check =  document.getElementById("ME_MGO").checked
//   const AE_MDO_check =  document.getElementById("ME_MDO").checked
//   // const AE_MGO_check =  document.getElementById("ME_MGO").checked

//   // const lng_DE_check =  document.getElementById("LNGCarrier_check").checked
//   // const lng_DE_check =  document.getElementById("LNGCarrier_check").checked

  
//   if(EventID === "radio_ME"){
//     document.getElementById("EEDI").classList.remove("hide")
//     document.getElementById("EEDI_AE").classList.add("hide")
//     document.getElementById("EEDI_ME").classList.remove("hide")
//     document.getElementById("radio_EEDI").classList.remove("hide")

//   }
//   else if(EventID === "radio_AE"){
//     document.getElementById("EEDI").classList.remove("hide")
//     document.getElementById("EEDI_ME").classList.add("hide")
//     document.getElementById("EEDI_AE").classList.remove("hide")
//     document.getElementById("radio_EEDI").classList.remove("hide")

//   }
//   else if(EventID === "radio_close"){
//     document.getElementById("EEDI").classList.add("hide")

//   }

//   else if (ME_LNG_MDO_check === true){
     
//     if(EventID==="ME_LNG_MDO"){
//       const ME_LNG_MDO_f = EventVal
//     }
//     else if(EventID==="ME_LNG_MDO_power"){
//      const ME_LNG_MDO_power = EventVal
//     }
//     else if(EventID==="ME_LNG_MDO_NO"){
//      const ME_LNG_MDO_NO = EventVal
//     }
//     else if(EventID==="ME_LNG_MDO_SFOC"){
//      const ME_LNG_MDO_SFOC = EventVal 
//     }

//   }

//   if(ship_type === "containership"){
//     DWT_70 = 0.7*DWT  
//     //DWT_70 is used for the attained EEDI 
//     a = 174.22
//     c = 0.201
    
//     EEDI_ref = 3.1144*(190*n_P_ME*P_ME + 215*P_AE)/(0.7*DWT*V_ref)
//   }
//   else if(ship_type === "LNGCarrier" || lng_DE_check === true){
//     document.getElementById("LNGCarrier_check").classList.remove("hide")
    
//   }

//   else if(EventID ==="LNG_DE"){


//   }

//   else if(ship_type ==="CruiseShip"|| ship_type ==="RoRoVehicleCarrier" ){
// //TODO: show  input field for GT and Dead weight 
//   }
// }


function powerSfoc(val){
    //this is for the power range
 document.getElementById('powerDisplay').innerHTML= val + " engine load kW"
}

function myFunction(val) {

// document.getElementById("demo").innerHTML = val;
// console.log(val)
// // lastRPM= document.getElementById("demo").min;
// // lastRPM= document.getElementById("demo").max;
// document.getElementById('displayRPM').innerHTML= val + " rpm"
// speedRPM = val
alert("Estimation using the RPM is still under improvemnt !, use other methods")
}

function showEngineDashbaord (){
  
  document.getElementById("mainDashboard").classList.remove("hide");
  document.getElementById("engineDashboard").classList.remove("hide");
  document.getElementById("engineDashboard").classList.add("grides");
  document.getElementById("power").classList.add("power");
  document.getElementById("load").classList.add("load");
  document.getElementById("torque").classList.add("torque");
  document.getElementById("RPM").classList.add("RPM");
  document.getElementById("loadwatt").classList.add("loadwatt");
  document.getElementById("SFOC").classList.add("SFOC");

}

  // using to assign either for engine or genset
  let engineDetail
function displayEngineType(event) {
  event.preventDefault()
  document.getElementById("engineTable").classList.remove("hide");
   //document.getElementById("mainDashboard").classList.remove("hide");
  document.getElementById("batteryTable").classList.add("hide");
  document.getElementById("gensetTable").classList.add("hide");
  document.getElementById("custo_genset").classList.add("hide");
  document.getElementById("custom_engine").classList.remove("hide");
  document.getElementById("select_message").classList.add("hide");

  const table = document.getElementById("Table");
  let i = 0
  let row, custo_eng_details;


  const EventVal = event.target.value
  const EventID = event.target.id
  if(EventID==="choose_sys"){
    if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
    //updating the object that holds the sellected engine and updating it with number of engines installed
    let N0_eng = document.getElementById("N0_eng").value
    sellected_engine = engineDetail
  sellected_engine.No_of_engine = N0_eng //
  
  document.getElementById("engineTable").classList.add("hide");
   document.getElementById("select_message").classList.remove("hide");
  document.getElementById("select_message_butt").value = "Main engine has been successfully added to the mechinery"
  // document.getElementById("gensetTable").classList.add("hide");

   throw "testing the"
 }
  
else if (EventVal==="wartsila 32"){
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
}
 engineDetail = wartsila32
}
else if (EventVal==="wartsila 46F") {
  engineDetail = wartsila46
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
}

}
else if(EventID==="custom_engine"){
  if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
  engineDetail = custom_engine
  create_type = EventID
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
 }
}
else if(EventID==="custo_confirm"){
  if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
  engineDetail = created_engine
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
 }
}
engineStrokes =engineDetail.Strokes
ratedPower = parseFloat(engineDetail.power) 
 meanPressure = parseFloat(engineDetail.mean_Presure)
 cylinderBore = parseFloat(engineDetail.cylinderBore)
 cylinders = parseFloat(engineDetail.cylinders)
 pistonStroke = parseFloat(engineDetail.pistonStroke)
  main_enginePower = parseFloat(engineDetail.power)
 ratedSfoc = parseFloat(engineDetail.SFOC)
 supplier = engineDetail.supplier
 ratedSpeed = parseFloat(engineDetail.Engine_speed)
 enginePower = main_enginePower
EngineCal.torque(engineStrokes,ratedSpeed,meanPressure,cylinderBore,cylinders,pistonStroke )
//  EngineCal.SFOC(load,power,ratedSfoc,supplier)
engine.Margin()
 torqueDisplay ()
 powerDisplay()
 rpmDisplay()
 loadDisplay()
 loadWattDisplay ()
 currentSfocDisplay()
    // updating sliders
  if(engineDetail.speed_type=== "Medium-Speed"){
   rpm_min = 400
   rpm_max = parseFloat(engineDetail.Engine_speed)
 }
 else if(engineDetail.speed_type=== "Slow-Speed"){
   rpm_min = 10
   rpm_max = parseFloat(engineDetail.Engine_speed)
 }
 else if(engineDetail.speed_type=== "Fast-Speed"){
   rpm_min = 1400
   rpm_max = parseFloat(engineDetail.Engine_speed)
 }
    document.getElementById('displayRPM').innerHTML= rpm_min + " minimun rpm"
    document.getElementById('RPM').value = rpm_min
    document.getElementById('RPM').max = rpm_max
    document.getElementById('RPM').min = rpm_min

   minLoad= document.getElementById('load').min
    document.getElementById('loadDisplay').innerHTML= minLoad+ " minimun load %"
    document.getElementById('load').value = minLoad

    minPower = enginePower*0.1

    document.getElementById('power').max = (enginePower-10)
    document.getElementById('power').min = minPower
    document.getElementById('power').value = minPower
    document.getElementById('powerDisplay').innerHTML= minPower+ " minimun desired power "
    let count = Object.keys(engineDetail).length

  for (let [key, value] of Object.entries(engineDetail)) {
    console.log(`${key}: ${value}`);
    document.getElementById("engineTable").classList.remove("hide");

      let table = document.getElementById("Table");
    //   table.classList.remove("hide")
       row = table.insertRow(i)
     console.log(row)
    row.insertCell(0).innerHTML =`<strong>`+`${key}:</strong> `;
    row.insertCell(1).innerHTML = `<strong>` +`${value}`+ "</strong>";
    i++;
  }
  let header= table.createTHead();
    let newRow = header.insertRow(0);
    let Tfooter = table.createTFoot();
    let nfooter = Tfooter.insertRow(0);
    newRow.innerHTML= "<th colspan=12>Product details and specifications </th>"
    if(EventID ==="custom_engine"){
      const y = document.getElementsByClassName("custom")[0]
    nfooter.innerHTML= `<th colspan=12><input type="submit" value="Confirm input" id="custo_confirm" class="tableconfirm"> </th>`
    y.id="custo_confirm"
    }else{    
      let newrow = table.insertRow(count+1)
      newrow.insertCell(0).innerHTML =`<strong>N0. of installed engine</strong> `;
      newrow.insertCell(1).innerHTML = `<input type="text" name="" id="N0_eng" required>`
    nfooter.innerHTML= `<th colspan=12><input type="submit" value="choose engine" id="choose_sys" class="tableconfirm"> </th>`
    const x = document.getElementsByClassName("custom")[0]
    x.id="choose_sys"
    }
}
let gensetDetail;
function displayGenSetType(event) {
  event.preventDefault()
  document.getElementById("engineTable").classList.add("hide");
  document.getElementById("gensetTable").classList.remove("hide");
  document.getElementById("batteryTable").classList.add("hide");
  // document.getElementById("mainDashboard").classList.remove("hide");  //this is for dispalying engine darshboard
  document.getElementById("custo_genset").classList.remove("hide");
  document.getElementById("custom_engine").classList.add("hide");

  document.getElementById("select_message").classList.add("hide");
  const table = document.getElementById("genset_Table");
  let i = 0
  let row;

  const EventVal = event.target.value
  const EventID = event.target.id
  
 if(EventID==="choose_sys"){
  if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
   let N0_gen = document.getElementById("N0_gen").value
  sellected_genset = gensetDetail
  sellected_genset.No_of_genset = N0_gen
  console.log(sellected_genset)
  document.getElementById("gensetTable").classList.add("hide");
   document.getElementById("select_message").classList.remove("hide");
  document.getElementById("select_message_butt").value = "Generator set has been successfully added to the mechinery"
  // document.getElementById("gensetTable").classList.add("hide");

  throw "testing the"
 }
else if (EventVal==="Wärtsilä_31DF"){
  
  gensetDetail = genset.GenSet2
 
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
}

}
else if(EventVal==="Wärtsilä_34DF"){
  
  gensetDetail = genset.GenSet1
  
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
}

}
else if(EventID==="custom_genset"){
  if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
  gensetDetail = custom_genset
  create_type = EventID
  
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
}
}

else if(EventID==="custo_confirm"){
  if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
  gensetDetail = created_genset
  console.log(gensetDetail)
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
}
}
 
aux_enginePower = parseFloat(gensetDetail.Gen_Power) 
aux_meanPressure = parseFloat(gensetDetail.mean_Presure)
 aux_cylinderBore = parseFloat(gensetDetail.cylinderBore)
 aux_cylinders = parseFloat(gensetDetail.cylinders)
 aux_pistonStroke = parseFloat(gensetDetail.pistonStroke)
 Gen_Power = parseFloat(gensetDetail.Gen_Power)
 rated_BSEC = parseFloat(gensetDetail.BSEC)
 engine_effic = gensetDetail.efficiency

 gen_supplier = gensetDetail.supplier
 aux_ratedSpeed = parseFloat(gensetDetail.Engine_speed)
 speedRPM =aux_ratedSpeed
 if(EventID ==="custom_genset"){
  gensetDetail.SFOC
 }else {
  gensetDetail.SFOC= (((rated_BSEC/42700)*(1-engine_effic)+(rated_BSEC/42700))*1000).toFixed(2)*1 + " g/kWh"
 aux_ratedsfoc = parseFloat(gensetDetail.SFOC)
 
 }
 
EngineCal.torque(aux_enginePower,aux_ratedSpeed,aux_meanPressure,aux_cylinderBore,aux_cylinders,aux_pistonStroke )
//  EngineCal.SFOC(load,power,ratedSfoc,supplier)
engine.Margin()
 torqueDisplay ()
 powerDisplay()
 rpmDisplay()
 loadDisplay()
 loadWattDisplay ()
 currentSfocDisplay()

    // updating sliders
  
    document.getElementById('displayRPM').innerHTML= rpm_min + " minimun rpm"
    document.getElementById('RPM').value = rpm_min
    document.getElementById('RPM').max = rpm_max
    document.getElementById('RPM').min = rpm_min

   minLoad= document.getElementById('load').min
    document.getElementById('loadDisplay').innerHTML= minLoad+ " minimun load %"
    document.getElementById('load').value = minLoad
    enginePower = aux_enginePower
    minPower = enginePower*0.1

    document.getElementById('power').max = (enginePower-10)
    document.getElementById('power').min = minPower
    document.getElementById('power').value = minPower
    document.getElementById('powerDisplay').innerHTML= minPower+ " minimun desired power "

  let count = Object.keys(gensetDetail).length

  //displaying the data in a table 
  for (let [key, value] of Object.entries(gensetDetail)) {
    
    document.getElementById("gensetTable").classList.remove("hide");

      let table = document.getElementById("genset_Table");
    //   table.classList.remove("hide")
       row = table.insertRow(i)
     console.log(row)
     console.log(i)
    row.insertCell(0).innerHTML =`<strong>`+`${key}:</strong> `;
    row.insertCell(1).innerHTML = `<strong>` +`${value}`+ "</strong>";
    i++;
    // row = table.insertRow(i)
  }
  let header= table.createTHead();
    let newRow = header.insertRow(0);
    let Tfooter = table.createTFoot();
    let nfooter = Tfooter.insertRow(0);
    newRow.innerHTML= "<th colspan=12>Product details and specifications </th>"
    if(EventID ==="custom_genset"){
    nfooter.innerHTML= `<th colspan=12><input type="submit" value="Confirm input" id="custo_confirm" class="tableconfirm"> </th>`
    const x = document.getElementsByClassName("custom")[2]
    x.id="custo_confirm"
    }else{ 
      let newrow = table.insertRow(count+1)
      newrow.insertCell(0).innerHTML =`<strong>N0. of installed genset</strong> `;
      newrow.insertCell(1).innerHTML = `<input type="text" name="" id="N0_gen" required>`
     nfooter.innerHTML= `<th colspan=12><input type="submit" value="choose Genset" id="choose_sys" class="tableconfirm"> </th>`
     const x = document.getElementsByClassName("custom")[2]
    x.id="choose_sys"
    }
   
}
let batteryDetail
function displayBatteryType(event) {
  event.preventDefault()
  document.getElementById("bat_Table").classList.remove("hide");
  document.getElementById("engineTable").classList.add("hide");
  document.getElementById("mainDashboard").classList.add("hide");
  document.getElementById("gensetTable").classList.add("hide");
  document.getElementById("select_message").classList.add("hide");

  const table = document.getElementById("bat_Table");
  let i = 0
  let row,c_ratec_rate,custom_batteryDetail ;

  const EventVa = event.target.value
  const EventID = event.target.id

 if(EventID==="choose_sys"){
  if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
  sellected_battery = batteryDetail
  console.log(sellected_battery)
   throw "testing the"
 }
  
else if (EventVa==="Orca_Energy"){
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
  batteryDetail = battery.corvus2
}
}
else if (EventVa==="Blue_Whale"){
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
  batteryDetail = battery.corvus1
}
}
//display the customized babttery details 
else if(EventID ==="custom_battery"){
  
      if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
  batteryDetail = custom_battery
}
}
else if(EventID ==="custo_confirm"){
  while (table.hasChildNodes()) {
  table.removeChild(table.firstChild);
  batteryDetail = created_battery
}
}
 capacity = parseFloat(batteryDetail.capacity) 
 c_rate = parseFloat(batteryDetail.c_Rate) 
  c_rate_peak = parseFloat(batteryDetail.c_Rate_peak) 
  
  if(!c_rate_peak){
    c_rate_peak = c_rate;
  }
  batteryDetail.cont_charging_power = (capacity/(c_rate*60/60)).toFixed(1)
    batteryDetail.peak_charging_power = (capacity/(c_rate_peak*60/60)).toFixed(1)
    batteryDetail.SOC = capacity*0.2
  // loop over the object of the battery details and display them on the table 
  for (let [key, value] of Object.entries(batteryDetail)) {
    console.log(`${key}: ${value}`);
    document.getElementById("batteryTable").classList.remove("hide");

      let table = document.getElementById("bat_Table");
    //   table.classList.remove("hide")
       row = table.insertRow(i)
     console.log(row)
    row.insertCell(0).innerHTML =`<strong>`+`${key}:</strong> `;
    row.insertCell(1).innerHTML = `<strong>` +`${value}`+ "</strong>";
    i++;
  }
  let header= table.createTHead(); // create table haeder 
    let newRow = header.insertRow(0);
    newRow.innerHTML= "<th colspan=12>Product details and specifications </th>"
    let Tfooter = table.createTFoot();
    let nfooter = Tfooter.insertRow(0);
  
    if(EventID ==="custom_battery"){
    nfooter.innerHTML= `<th colspan=12><input type="submit" value="Confirm input" id="custo_confirm" class="tableconfirm"></th>`
    const x = document.getElementsByClassName("custom")[1]
    x.id="custo_confirm"
    }else{    
    nfooter.innerHTML= `<th colspan=12><input type="submit" value="choose battery pack" id="choose_sys" class="tableconfirm" > </th>`
    const x = document.getElementsByClassName("custom")[1]
    x.id="choose_sys"
    }
   
}

function custom_bat_pack(event){
 //capturing the input date for the customized battery and creating a new battery pack
 if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
   const eventID = event.target.id
  const eventVal = event.target.value
  
      if(eventID==="supplier"){
        created_battery.supplier = eventVal 
      }
      else if(eventID==="c_Rate_peak"){
        created_battery.c_Rate_peak = eventVal + " c"
      }
      else if(eventID==="c_Rate"){
        created_battery.c_Rate = eventVal + " c"
      }
      else if(eventID==="lifeCycle"){
        created_battery.lifeCycle = eventVal
      }
      else if(eventID==="DOD"){
        created_battery.DOD = eventVal
      }
      else if(eventID==="voltage"){
        created_battery.voltage = eventVal + " kV"
      }
      else if(eventID==="capacity"){
        created_battery.capacity = eventVal + " kWh"
      }
      else if(eventID==="nor_Voltage"){
        created_battery.nor_Voltage = eventVal + " VDC"
      }
      else if(eventID==="weight"){
        created_battery.weight = eventVal + " mm"
      }
      else if(eventID==="heigh"){
        created_battery.height = eventVal + " mm"
      }
      else if(eventID==="width"){
        created_battery.width = eventVal + " mm"
      }
      else if(eventID==="depth"){
        created_battery.depth = eventVal + " mm"
      }      
}

function custom_engine_genset(event){
 //capturing the input date for the customized battery and creating a new battery pack
 if(!propulsion_syst){
    alert("choose propulsion system first")
    throw "propulsion system unknow"
  }
  create_type // using to assign either for engine or genset
 let object_detail 
 
 if(create_type==="custom_engine"){
   //create new engine object
   object_detail = created_engine  
 }
 else if(create_type==="custom_genset"){
  object_detail = created_genset
 }
 const eventID = event.target.id
  const eventVal = event.target.value
  // alert(eventID)
if(eventID==="supplier"){
  object_detail.supplier = eventVal
   }
      else if(eventID==="frequency"){
        object_detail.frequency = eventVal +" Hz"
      }
      else if(eventID==="rpm"){
        object_detail.Engine_speed = eventVal + " rpm"
      }
      else if(eventID==="SFOC"){
        object_detail.SFOC = eventVal + " g/kWh"
     
      }
      else if(eventID==="BSEC"){
        object_detail.BSEC = eventVal + " kJ/kWh"

      }
      else if(eventID==="pistonStroke"){
        object_detail.pistonStroke = eventVal + " mm"
      }
      else if(eventID==="cylinderBore"){
        object_detail.cylinderBore = eventVal + " mm"
      }
      else if(eventID==="mean_Presure"){
        object_detail.mean_Presure = eventVal  + " bar"
      }
      else if(eventID==="fuel_type"){
        object_detail.fuel_type = eventVal
        if(eventVal==="LNG"){
          object_detail.LHV = "48 MJ/kg"
          
        }
        else if(eventVal==="MDO" || eventVal==="MGO"){
          object_detail.LHV = "42.7 MJ/kg"
        }
        else if(eventVal==="HFO"){
          object_detail.LHV = "40.2 MJ/kg"
        }
      }
      else if(eventID==="Engin_Power"){
        object_detail.Engin_Power = eventVal + " kW"
      
      }
      else if(eventID==="Gen_Power"){
        object_detail.Gen_Power = eventVal + " kW"
      }
      else if(eventID==="efficiency"){
        object_detail.efficiency = eventVal    
      }
      else if(eventID==="speed_type"){
        object_detail.speed_type = eventVal
      }
      else if(eventID==="Strokes"){
        object_detail.Strokes = eventVal + " mm"
      } 
}

function powerOn(event){
  const Eventval = "power"
  const eventID = event.target.id
  if(eventID ==="powerOn"){
    engineDashboard(Eventval ,Ptotal)
  }
  else if(eventID ==="done"){
document.getElementById("mainDashboard").classList.add("hide")
  }

}

function engineDashboard(EventID ,val ){

    t = 1 
  if(EventID ==='loadInput'|| EventID ==='load'){
    
    sfocDisplay ()
     c= (10/100)*val;
     n = 10
     if(val >=20 && val <= 100){
        i = 0
      for ( k = 10; k < val;k +=c) {

        inputData(i);
        i++
        }
        function inputData(i) {
        setTimeout(function() {

            console.log(i);
                if(val -n >c ){
                load = (n/100)*enginePower
                EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)
                console.log("this is the load 1",load)
             }else{
            load = (val/100)*enginePower
            EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)
            console.log("this is the load last",load)
                }
                Plotly.extendTraces('plot', {
                x: [[engine_loadPercent]],
                y: [[sfoc_cal]]
              }, [0], 10000)
              n+=c

        }, 1000 * i);
        }

  }
}
 
  else if(EventID === 'powerInput' || EventID ==='power'){
    sfocDisplay ()
    c= (10/100)*val;
     if(val >=minPower && val <= enginePower){
        i = 0
        n= minPower;  
      for ( k = minPower; k < val;k +=c) {
        inputData(i);
        i++
        }

     function inputData(i) {
        setTimeout(function() {
               if(val -n >c ){
    
                load = n
                EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)
                console.log("this is the load 1",load)
             }else{
            load = val
            EngineCal.SFOC(load,enginePower,ratedSfoc,supplier)
            console.log("this is the load last",load)
                }
                Plotly.extendTraces('plot', {
                x: [[engine_loadPercent]],
                y: [[sfoc_cal]]
              }, [0], 10000)
              n+=c
        }, 1000 * i);
        }
}

  }
}

function getValues(event){
    let val, k,i, n, c,t
    t = 1
  const EventID = event.target.id;

 if (EventID ==='RPM' || EventID === 'RPMInput') {
      RPM  = event.target.value
    if (EventID ==='RPMInput') {
     document.getElementById(EventID).value = ""
    }
}
else if(EventID ==='loadInput'|| EventID ==='load'){
    if( EventID ==='loadInput'){
      val = document.getElementById(EventID).value
      document.getElementById(EventID).value = ""
      document.getElementById("loadDisplay").innerHTML= val + "% engine power"
    }else{
      val  = event.target.value
      document.getElementById("loadDisplay").innerHTML= val + "% engine power"
    }
    engineDashboard(EventID,val)
}
// }
else if(EventID === 'powerInput' || EventID ==='power'){

  if(EventID === 'powerInput'){

    val = parseFloat(document.getElementById(EventID).value)
    document.getElementById(EventID).value = ""
    document.getElementById("powerDisplay").innerHTML= val + " engine load kW"
  }else{
    val = parseFloat(document.getElementById(EventID).value)
  }
  engineDashboard(EventID,val )

}
}

//  let simulate,DP_time, habor_time,standby_time,PpowerInstall,
//  star_time,end_time,power_aval,transit_time, FC_total, FC,calm_simulate

function display_sim(event){

  if(!propulsion_syst){
    alert("choose propulsion system first")
    document.getElementById("sim_check").checked = false
    throw "propulsion system unknow"
  }
const eventID = event.target.id
const eventVal = event.target.value
const eventcheck = event.target.checked
  const sim_check = document.getElementById("sim_check").checked
 const use_result_check = document.getElementById("use_result").checked
 const define_result_check = document.getElementById("define_result").checked
 
 
 if(eventID==="define_result"){
  document.getElementById("main_load").disabled = false;
}
 else if (sim_check ===true){
  document.getElementById("sim_environment").classList.remove("hide")
  document.getElementById("sim_time").required = true
  document.getElementById("aux_load_input").required = true
  // document.getElementById("aux_load_input").required = true

} 
else if (sim_check ===false){
  document.getElementById("sim_environment").classList.add("hide")
  
}

 if(eventID ==="engine_perf"){
  document.getElementById("mainDashboard").classList.remove("hide");
  // document.getElementById("mainDashboard").classList.add("hide")
  engine.Margin()
 torqueDisplay ()
 powerDisplay()
 rpmDisplay()
 loadDisplay()
 loadWattDisplay ()
 currentSfocDisplay()
}
else if(eventID ==="close"){

  document.getElementById("select_message").classList.add("hide");
  // document.getElementById("mainDashboard").classList.add("hide");

}

if(use_result_check ===true){
  // const sim_check = document.getElementById("sim_environment").checked
  document.getElementById("main_load").disabled = true;

}
else if(define_result_check ===true){
  document.getElementById("main_load").required = true;

}

}
// let transit_dis
// function sim_data(event){
//   transit_dis= event.target.value
//   alert(transit_dis)
//  transit_dis =  document.getElementById("transit_dis").value

// }

//sim = simulation
let transit_dis_mils
function sim_data(event){
  // display the field and get the input data in the simulation environment 
  const eventID = event.target.id
  const eventcheck = event.target.checked
  const eventVal = event.target.value
 
 aux_load = document.getElementById("aux_load_input").value
 main_Pb =  document.getElementById("main_load").value
 sim_time =  document.getElementById("sim_time").value
//  transit_dis =  document.getElementById("transit").value
 DP_operat_time =  document.getElementById("DP_time").value
 harbor_time =  document.getElementById("DP_time").value
 standby_time =  document.getElementById("DP_time").value
 wave_height =  document.getElementById("wave_height").value

if(eventcheck === false){
    //hide respective element
    if(eventID === "opera_time"){
  document.getElementById("opera_time_span").classList.add("hide")
  document.getElementById("opera_time").false
    }
  else if(eventID==="None_calm_sim"){
  document.getElementById("wave").classList.add("hide")
  document.getElementById("wave_height").required = false

  }
  else if(eventID ==="transit"){
   //display input fieled for in inputing wave height when simulating in wave environment
  document.getElementById("transit_span").classList.add("hide")
  document.getElementById("transit_dis").required = false
 }
 else if(eventID ==="standby"){
   //display input fieled for in inputing wave height when simulating in wave environment
  document.getElementById("standby_time_span").classList.add("hide")
  document.getElementById("standby_time").required = false
 }
 else if(eventID ==="harbor"){
   //display input fieled for in inputing wave height when simulating in wave environment
  document.getElementById("harbor_time_span").classList.add("hide")
  document.getElementById("harbor_time").required = false
 }
 else if(eventID ==="DP"){
   //display input fieled for in inputing wave height when simulating in wave environment
  document.getElementById("DP_time_span").classList.add("hide")
  document.getElementById("DP_time").required = false
 }
 
}

else if (eventcheck ===true){
 
  if(eventID ==="opera_time"){
   //display operation time when simulating for DP, Harbor
  document.getElementById("opera_time_span").classList.remove("hide")
  document.getElementById("opera_time").required = true
 }

 else if(eventID ==="None_calm_sim"){
   //display input fieled for in inputing wave height when simulating in wave environment
  document.getElementById("wave").classList.remove("hide")
  document.getElementById("wave_height").required = true
 }
 else if(eventID ==="transit"){
   //display input fieled for in inputing wave height when simulating in wave environment
  document.getElementById("transit_span").classList.remove("hide")
  document.getElementById("transit_dis").required = true
 }
 else if(eventID ==="standby"){
  document.getElementById("standby_time_span").classList.remove("hide")
  document.getElementById("standby_time").required = true
 }
 else if(eventID ==="harbor"){
  document.getElementById("harbor_time_span").classList.remove("hide")
  document.getElementById("harbor_time").required = true
 }
 else if(eventID ==="DP"){
  document.getElementById("DP_time_span").classList.remove("hide")
  document.getElementById("DP_time").required = true

 }
 
}
i
// alert(eventID)
if(eventID==="transit_dis"){
  transit_dis_mils = eventVal
}
else if(eventID==="main_load"){
Pb = eventVal // overide the inital calculation and assigned new break power 
}

display_sim_param()
}

let eng_power, gen_pwer,bat_capacity,bat_SOC,bat_DOD,bat_volt,bat_C_rated,bat_C_rated_peak,simu_time_show, total_insta_power,show_propulsion

function display_sim_param(){

  if(sellected_genset||!sellected_genset){
    if(sellected_genset){
    No_of_genset = parseFloat(sellected_genset.No_of_genset) 
    aux_enginePower = parseFloat(sellected_genset.Gen_Power)
    aux_inst_power =No_of_genset* aux_enginePower
   
    }
    else if(!sellected_genset){
    aux_enginePower = 0
    aux_inst_power = 0
    No_of_genset = 0
  }
  }
 
    if(sellected_engine){
    No_of_eng =parseFloat(sellected_engine.No_of_engine)
    eng_power = parseFloat(sellected_engine.power)
    main_inst_power = No_of_eng*eng_power
    console.log(sellected_engine)
    }
    else if(!sellected_engine){
    No_of_eng = 0
    eng_power = 0
    main_inst_power = 0
    
   }
  
   if(sellected_battery){
    bat_capacity = sellected_battery.capacity
    bat_SOC = sellected_battery.SOC  
     bat_DOD = sellected_battery.DOD
    bat_volt = sellected_battery.nor_Voltage
    bat_C_rated = sellected_battery.c_Rate
    bat_C_rated_peak = sellected_battery.c_Rate_peak
    bat_charge_power = sellected_battery.cont_charging_power

  }else if(!sellected_battery) {
    bat_capacity = 0
    bat_SOC = 0
    bat_DOD = 0
    bat_volt = 0
    bat_C_rated = 0
    bat_C_rated_peak = 0
    bat_charge_power= 0
  }

  if(propulsion_syst){
    if(propulsion_syst === "ME"){
      show_propulsion = "Mechanica propulsion (ME)"
    }
    else if(propulsion_syst === "DE_ME"){
      show_propulsion = "Hybrid: DE and ME"
    }
    else if(propulsion_syst === "DE"){
      show_propulsion = "Diesel Electric Propulsion (DE)"
    }
    else if(propulsion_syst === "DE_Battery"){
      show_propulsion = "Diesel Electric with battery Propulsion"
    }
    else if(propulsion_syst === "battery_E"){
      show_propulsion = " Battery electric Propulsion"
    }
  }else if(!propulsion_syst){
    show_propulsion = "not ready"
  }
    
  if(end_sim){
    
    simu_time_show = end_sim
    
  }
  else if(!end_sim){
    simu_time_show = "not updated yet..."
  }

  
  total_insta_power = main_inst_power+ aux_inst_power+bat_charge_power
  
//display the parameters prameters that has been input or sellected 
 document.getElementById("main_eng_power_dis").innerHTML =  eng_power + "  kW"
 document.getElementById("main_engine_rpm").innerHTML = ratedSpeed + " rpm"
 document.getElementById("no_engines").innerHTML =  No_of_eng 
 document.getElementById("propulsion_p").innerHTML = Pb+ " kW   "
 document.getElementById("main_installed_power").innerHTML = main_inst_power  +" kW  "
 
 document.getElementById("aux_eng_power_dis").innerHTML =  aux_enginePower + "  kw"
  document.getElementById("aux_engine_rpm").innerHTML = aux_ratedSpeed + " rpm"
 document.getElementById("aux_no_engines").innerHTML =  No_of_genset + " "
 document.getElementById("aux_load").innerHTML = aux_load +  " kW  "
 document.getElementById("aux_installed_power").innerHTML = aux_inst_power + " kW  "

 document.getElementById("b_capacity").innerHTML =  bat_capacity 
 document.getElementById("c_rate").innerHTML = bat_C_rated
  document.getElementById("c_rate_peak").innerHTML = bat_C_rated_peak 
 document.getElementById("DOD_pro").innerHTML =  bat_DOD 
 document.getElementById("SOC_pro").innerHTML = bat_SOC + " kWh"
 document.getElementById("volt_pro").innerHTML = bat_volt 
 document.getElementById("charge_power").innerHTML =  bat_charge_power + " kW"

 document.getElementById("chose_propulsion").innerHTML =  show_propulsion
 document.getElementById("Total_inst_power").innerHTML =  total_insta_power
  document.getElementById("simulate_time").innerHTML = simu_time_show +" milliseconds"
//  document.getElementById("DOD_pro").innerHTML =  bat_DOD 
//  document.getElementById("SOC_pro").innerHTML = bat_SOC + " kWh"
//  document.getElementById("volt_pro").innerHTML = bat_volt 
//  document.getElementById("charge_power").innerHTML =  bat_charge_power 
}


function dispProSystem(event){

// disable the different power source according propulsion system eg (if you choose mechanical propulsion then battery is disabled) 
  const table_eng = document.getElementById("Table");
  const table_bat = document.getElementById("bat_Table");
  const table_gen = document.getElementById("genset_Table");
  
  const EventValue = event.target.value 
  propuls_type = EventValue
 
  if(EventValue ==="DE"){
    document.getElementById("engine_select").disabled =true
    document.getElementById("battery_select").disabled =true
    document.getElementById("batteryTable").classList.add("hide");

  }
  else if(EventValue === "ME"){
    document.getElementById("engine_select").disabled =false
    document.getElementById("battery_select").disabled =true
    document.getElementById("genset_select").disabled =false
    document.getElementById("batteryTable").classList.add("hide");

  }
  else if(EventValue === "DE_ME"){
    document.getElementById("battery_select").disabled =true
    document.getElementById("genset_select").disabled =false
    document.getElementById("engine_select").disabled =false
    document.getElementById("batteryTable").classList.add("hide");
}
else if(EventValue === "DE_Battery"){
  
  document.getElementById("battery_select").disabled =false
  document.getElementById("genset_select").disabled =false
  document.getElementById("engine_select").disabled =true
  document.getElementById("engineTable").classList.add("hide");
}
else if(EventValue === "battery_E"){
  document.getElementById("battery_select").disabled =false
  document.getElementById("genset_select").disabled =true
  document.getElementById("engine_select").disabled =true
  document.getElementById("gensetTable").classList.add("hide");
  document.getElementById("engineTable").classList.add("hide");

}
propulsion_syst = EventValue
  
}

function PMS(){
  this.ME_sys = function(){
    
  }
  this.ME_sys = function(){  
  }
}
LiveResult()
// sfocDisplay ()

function preview(event){
  event.preventDefault()
  const eventID = event.target.id
  
  if(eventID ==="view_data"){
    document.getElementById("sellected_disp").classList.remove("hide")
  }
  
  main_Simulate()
  display_sim_param()
}
let trans_check,standby_check,harbor_check,DP_check,sim_time,end_sim,distance_past,time
function main_Simulate(event){
  
  
  
  let type, aux_load_perc,max_load_perc
   trans_check = document.getElementById("transit").checked
   standby_check = document.getElementById("standby").checked
   DP_check = document.getElementById("DP").checked
   harbor_check = document.getElementById("harbor").checked
  sim_time = document.getElementById("sim_time").value
  transit_dis_mils 
  // const eventID = event.target.id
  // const eventVal = event.target.value
  // const eventcheck = event.target.checked
  
  aux_load_perc =(aux_load/aux_enginePower)*100 //TODO: note this needs to be modify to handle many engine 
  max_load_perc = (Pb/main_enginePower)*100 //TODO: note this needs to be modify to handle many engine 
 
 if (trans_check === true){
    transit_dis = transit_dis_mils*1852 // meters
    transit_time = (transit_dis/shipSpeed)/3600 //time for transit in seconds
    end_sim = sim_time*60*1000 // convert the input time to milli seconds  
    time_step = (transit_time*3600*1000/(end_sim /500)) //time step for every 0.5 seconds
  const sim_interv = setInterval(sim, 500);
  time_step = time_step/(3600*1000)
  time = 0
  FC_ton_aux = 0
  FC_ton = 0
  distance_past = 0
  LiveResult()// live ploting 
  sim_time = 0 // used to stored time past which correspond to the distance moved 
  function sim() {
    load = Pb // break power 
    type = "main" // the type is only important when it is auxilary calculation
    console.log("load",load)
    console.log("engine power",enginePower)
    console.log("rate sfoc",ratedSfoc)
    console.log("suplier",supplier)
    console.log("main_enginePower",main_enginePower)
    time +=500
    sim_time +=time_step
    distance_past  = (shipSpeed*(sim_time*3600))/1852
    
    EngineCal.SFOC(load,main_enginePower,ratedSfoc,supplier,type)
    FC = Pb*(sfoc_cal/1000)*time_step
    FC_ton += FC/1000
    FC_ton = FC_ton.toFixed(2)*1
    // fuel_Details (FC_ton)
    //for Auxiliary engine and load 
     type = "auxilary"
     aux_load // hotel laod and other 
     aux_enginePower
     
     gen_supplier
     EngineCal.SFOC(aux_load,aux_enginePower,aux_ratedsfoc,gen_supplier,type)
     FC_aux = aux_load*(sfoc_cal_aux/1000)*time_step
     FC_ton_aux += FC_aux/1000
     FC_ton_aux = FC_ton_aux.toFixed(2)*1
    //  fuel_Details (FC_ton_aux)
    
     console.log("aux_ratesfoc",aux_ratedsfoc)
     console.log("aux engine",aux_enginePower)
     console.log("sfoc_cal_aux",sfoc_cal_aux)
     console.log("sfoc_cal",sfoc_cal)
     console.log("aux load",aux_load)
     console.log("FC TON_aux",FC_ton_aux)
     console.log("FC TON",FC_ton)
     console.log("FC_aux",FC_aux)

    if(end_sim-time <=499){
      time_step = transit_time-sim_time
      FC = Pb*(sfoc_cal/1000)*time_step
      FC_ton += FC/1000
      FC_ton = FC_ton.toFixed(2)*1
      // fuel_Details (FC_ton)
      
   // "Auxiliary 
      FC_aux = aux_load*(sfoc_cal_aux/1000)*time_step
     FC_ton_aux += FC_aux/1000
     FC_ton_aux = FC_ton_aux.toFixed(2)*1
    //  fuel_altern = new alternativeFuel(FC_ton_aux,"Auxiliary")
    // fuel_Details (FC_ton_aux)
   
    }
      
    if (time >=end_sim) {
      clearInterval(sim_interv);
    } else {
      
    }
    plotResult()
    function plotResult(){
      Plotly.extendTraces('result', {
            x: [[time],[time],[time],[time]],
            y: [[aux_load],[Pb],[main_enginePower],[aux_enginePower]]
          }, [0,1,2,3], 1000)

    //   Plotly.extendTraces('plot', {
    //  x: [[max_load_perc],[max_load_perc]],
    // y: [[sfoc_cal],[sfoc_cal_aux]]
    //  }, [0,1], 10000)
        
      
    }
    main_display_darshboard()
    fuel_Details ()
    
}

  // else if(DP){

  // }
  // else if(harbor){

  // }
  // else if(standdy){
   
  // }
 
}

}
let aux_LNG_cost,aux_LNG_CO2,aux_LNG_NOx,aux_LNG_SOx,aux_LNG_PM,aux_LNG_NMVOC,aux_LNG_volume,
main_LNG_cost,main_LNG_CO2,main_LNG_NOx,main_LNG_SOx,main_LNG_PM,main_LNG_NMVOC,main_LNG_volume,
aux_MDO_cost,aux_MDO_CO2,aux_MDO_NOx,aux_MDO_SOx,aux_MDO_PM,aux_MDO_NMVOC,aux_MDO_volume,
main_MDO_cost,main_MDO_CO2,main_MDO_NOx,main_MDO_SOx,main_MDO_PM,main_MDO_NMVOC,main_MDO_volume,
aux_MGO_cost,aux_MGO_CO2,aux_MGO_NOx,aux_MGO_SOx,aux_MGO_PM,aux_MGO_NMVOC,aux_MGO_volume,
main_MGO_cost,main_MGO_CO2,main_MGO_NOx,main_MGO_SOx,main_MGO_PM,main_MGO_NMVOC,main_MGO_volume,
aux_HFO_cost,aux_HFO_CO2,aux_HFO_NOx,aux_HFO_SOx,aux_HFO_PM,aux_HFO_NMVOC,aux_HFO_volume,
main_HFO_cost,main_HFO_CO2,main_HFO_NOx,main_HFO_SOx,main_HFO_PM,main_HFO_NMVOC,main_HFO_volume, main_update, aux_update,

main_cost,main_CO2,main_NOx,main_SOx,main_PM,main_NMVOC,main_volume,
aux_cost,aux_CO2,aux_NOx,aux_SOx,aux_PM,aux_NMVOC,aux_volume,main_engine_fuel, Aaux_engine_fuel



function fuel_Details (){
  
  // getting the currently fuel propert use for main and Auxilairy engine 
  if(sellected_engine.fuel_type === "LNG"){
    main_engine_fuel = fuel_property.LNG(FC_ton,"main")
    main_CO2 = main_engine_fuel.LNG_CO2
    main_NOx = main_engine_fuel.LNG_NOx
    main_NMVOC = main_engine_fuel.LNG_NMVOC
    main_SOx = main_engine_fuel.LNG_Sox
    main_PM = main_engine_fuel.LNG_PM
    main_cost = main_engine_fuel.LNG_cost
    main_volume = main_engine_fuel.LNG_volume

     }
     else if(sellected_engine.fuel_type === "MGO"){
    main_engine_fuel = fuel_property.MGO(FC_ton,"main")
    main_CO2 = main_engine_fuel.MGO_CO2
    main_NOx = main_engine_fuel.MGO_NOx
    main_NMVOC = main_engine_fuel.MGO_NMVOC
    main_SOx = main_engine_fuel.MGO_Sox
    main_PM = main_engine_fuel.MGO_PM
    main_cost = main_engine_fuel.MGO_cost
    main_volume = main_engine_fuel.MGO_volume

     }
     
     else if(sellected_engine.fuel_type === "MDO"){
  
    main_engine_fuel = fuel_property.MDO(FC_ton,"main")
    main_CO2 = main_engine_fuel.MDO_CO2
    main_NOx = main_engine_fuel.MDO_NOx
    main_NMVOC = main_engine_fuel.MDO_NMVOC
    main_SOx = main_engine_fuel.MDO_Sox
    main_PM = main_engine_fuel.MDO_PM
    main_cost = main_engine_fuel.MDO_cost
    main_volume = main_engine_fuel.MDO_volume
    console.log(main_volume)

     }
    else if(sellected_engine.fuel_type === "HFO"){
    main_engine_fuel = fuel_property.HFO(FC_ton,"main")
    main_CO2 = main_engine_fuel.HFO_CO2
    main_NOx = main_engine_fuel.HFO_NOx
    main_NMVOC = main_engine_fuel.HFO_NMVOC
    main_SOx = main_engine_fuel.HFO_Sox
    main_PM = main_engine_fuel.HFO_PM
    main_cost = main_engine_fuel.HFO_cost
    main_volume = main_engine_fuel.HFO_volume

     }

     if(sellected_genset.fuelType === "LNG"){
    aux_engine_fuel = fuel_property.LNG(FC_ton_aux,"Auxiliary")
    aux_CO2 = aux_engine_fuel.LNG_CO2_Aux
    aux_NOx = aux_engine_fuel.LNG_NOx_Aux
    aux_NMVOC = aux_engine_fuel.LNG_NMVOC_Aux
    aux_SOx = aux_engine_fuel.LNG_Sox_Aux
    aux_PM = aux_engine_fuel.LNG_PM_Aux
    aux_cost = aux_engine_fuel.LNG_cost_Aux
    aux_volume = aux_engine_fuel.LNG_volume_Aux

     }
     else if(sellected_genset.fuelType === "MGO"){
    aux_engine_fuel = fuel_property.MGO(FC_ton_aux,"Auxiliary")
    aux_CO2 = aux_engine_fuel.MGO_CO2_Aux
    aux_NOx = aux_engine_fuel.MGO_NOx_Aux
    aux_NMVOC = aux_engine_fuel.MGO_NMVOC_Aux
    aux_SOx = aux_engine_fuel.MGO_Sox_Aux
    aux_PM = aux_engine_fuel.MGO_PM_Aux
    aux_cost = aux_engine_fuel.MGO_cost_Aux
    aux_volume = aux_engine_fuel.MGO_volume_Aux

     }
     else if(sellected_genset.fuelType === "MDO"){
    aux_engine_fuel = fuel_property.MDO(FC_ton_aux,"Auxiliary")
    aux_CO2 = aux_engine_fuel.MDO_CO2_Aux
    aux_NOx = aux_engine_fuel.MDO_NOx_Aux
    aux_NMVOC = aux_engine_fuel.MDO_NMVOC_Aux
    aux_SOx = aux_engine_fuel.MDO_Sox_Aux
    aux_PM = aux_engine_fuel.MDO_PM_Aux
    aux_cost = aux_engine_fuel.MDO_cost_Aux
    aux_volume = aux_engine_fuel.MDO_volume_Aux
    console.log(aux_volume)

     }
    else if(sellected_genset.fuelType === "HFO"){
    aux_engine_fuel = fuel_property.HFO(FC_ton_aux,"Auxiliary")
    aux_CO2 = aux_engine_fuel.HFO_CO2_Aux
    aux_NOx = aux_engine_fuel.HFO_NOx_Aux
    aux_NMVOC = aux_engine_fuel.HFO_NMVOC_Aux
    aux_SOx = aux_engine_fuel.HFO_Sox_Aux
    aux_PM = aux_engine_fuel.HFO_PM_Aux
    aux_cost = aux_engine_fuel.HFO_cost_Aux
    aux_volume = aux_engine_fuel.HFO_volume_Aux

     }
     
    
     main_update = [main_CO2,main_SOx,main_NOx,main_NMVOC]
      aux_update = [aux_CO2,aux_SOx,aux_NOx,aux_NMVOC]
      updatChat()
 function updatChat(){
   console.log(main_update)
   console.log(aux_update)
  myChart.data.datasets[0].data =  main_update;
  myChart.data.datasets[1].data =aux_update ;
  myChart.update();
 }
}

function main_display_darshboard(){
 
  let wave,distance_N_mils,aux_active,active,ETA
  distance_N_mils = transit_dis_mils - distance_past //distance covered so far
   ETA = transit_time - sim_time

  ETA = ETA.toFixed(2)
  distance_N_mils  = distance_N_mils.toFixed(2)

  if(wave_height){
    wave = wave_height
  }else if(!wave_height){
    wave = 0
  }
 
  // impliment active engine status TODO:
  aux_active = " updating...."
  active = " updating...." // for the main engine 
  if(aux_no_engines>1 && aux_load>aux_enginePower){
    // check for the active engine TODO: 

  }
  document.getElementById("main_install_darsh").innerHTML = main_enginePower * No_of_eng
  document.getElementById("main_FC_darsh").innerHTML = FC_ton
  document.getElementById("main_active_engine_darsh").innerHTML = active
  document.getElementById("main_no_engines_darsh").innerHTML = No_of_eng
  document.getElementById("main_load_darsh").innerHTML = Pb
  document.getElementById("main_sfoc_darsh").innerHTML = sfoc_cal

  document.getElementById("aux_install_darsh").innerHTML = aux_enginePower*No_of_genset
  document.getElementById("aux_FC_darsh").innerHTML = FC_ton_aux
  document.getElementById("aux_active_engine_darsh").innerHTML = aux_active
  document.getElementById("aux_no_engines_darsh").innerHTML = No_of_genset
  document.getElementById("aux_load_darsh").innerHTML = aux_load
  document.getElementById("aux_sfoc_darsh").innerHTML = sfoc_cal_aux

  
  document.getElementById("wave_height_show").innerHTML = wave + " m"
  document.getElementById("ETA").innerHTML = ETA +" Hrs"
  document.getElementById("distance_Mils").innerHTML = distance_N_mils +" nm"
  document.getElementById("speed_show").innerHTML = shipSpeedKnots 

  document.getElementById("capacity_darsh").innerHTML = bat_capacity 
  document.getElementById("soc_darsh").innerHTML = bat_SOC 
  document.getElementById("DOD_darsh").innerHTML = bat_DOD 
  document.getElementById("c_rate_peak_darsh").innerHTML = bat_C_rated_peak
  document.getElementById("c_rate_darsh").innerHTML = bat_C_rated

 
}

function end_simulate(){
  simulate = false
}


    </script>

</body>
</html>